<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin
   id="org.eclipse.photran.core"
   name="Photran Core Plug-in"
   version="3.0.0"
   provider-name="University of Illinois at Urbana-Champaign and Los Alamos National Laboratory"
   class="org.eclipse.photran.core.FortranCorePlugin">

   <runtime>
      <library name="fdtcore.jar">
         <export name="*"/>
      </library>
   </runtime>

   <requires>
      <import plugin="org.eclipse.core.runtime"/>
      <import plugin="org.eclipse.cdt.core"/>
      <import plugin="org.eclipse.core.resources"/>
      <import plugin="org.eclipse.photran.modelicons"/>
      <import plugin="org.eclipse.jface"/>
   </requires>

<!-- =================================================================================== -->
<!-- Extension Point: FortranFileType and FortranFileTypeAssociation                     -->
<!--                  for translation unit ident                                         -->
<!-- =================================================================================== -->
<!-- I do not think these are needed, as can use the CDT extension points -->
   <!--extension-point id="FortranLanguage" name="FortranLanguage" schema="schema/FortranLanguage.exsd"/>
   <extension-point id="FortranFileType" name="FortranFileType" schema="schema/FortranFileType.exsd"/>
   <extension-point id="FortranFileTypeAssociation" name="FortranFileTypeAssociation" schema="schema/FortranFileTypeAssociation.exsd"/-->

<!-- =================================================================================== -->
<!-- Define the list of Error Parsers provided by the FDT                                 -->
<!-- =================================================================================== -->
   <extension
         id="AbsoftErrorParser"
         name="Photran Error Parser for Absoft Fortran"
         point="org.eclipse.cdt.core.ErrorParser">
      <errorparser
            class="org.eclipse.photran.internal.errorparsers.AbsoftErrorParser">
      </errorparser>
   </extension>
   <extension
         id="XLFErrorParser"
         name="%FDTXLFErrorParser.name"
         point="org.eclipse.cdt.core.ErrorParser">
      <errorparser
            class="org.eclipse.photran.internal.errorparsers.XLFErrorParser">
      </errorparser>
   </extension>
   <extension
         id="GFortranErrorParser"
         name="%FDTGFortranErrorParser.name"
         point="org.eclipse.cdt.core.ErrorParser">
      <errorparser
            class="org.eclipse.photran.internal.errorparsers.GFortranErrorParser">
      </errorparser>
   </extension>
   <extension
         id="IntelFortranErrorParser"
         name="Photran Error Parser for Intel Fortran 8.1"
         point="org.eclipse.cdt.core.ErrorParser">
      <errorparser
            class="org.eclipse.photran.internal.errorparsers.IntelFortranErrorParser">
      </errorparser>
   </extension>
   <extension
         id="LaheyFortranErrorParser"
         name="Photran Error Parser for Lahey/Fujitsu Fortran 7.1"
         point="org.eclipse.cdt.core.ErrorParser">
      <errorparser
            class="org.eclipse.photran.internal.errorparsers.LaheyFortranErrorParser">
      </errorparser>
   </extension>
   <extension
         id="G95FortranErrorParser"
         name="Photran Error Parser for G95 Fortran"
         point="org.eclipse.cdt.core.ErrorParser">
      <errorparser
            class="org.eclipse.photran.internal.errorparsers.G95FortranErrorParser">
      </errorparser>
   </extension>
   <extension
         id="FErrorParser"
         name="Photran Error Parser for F"
         point="org.eclipse.cdt.core.ErrorParser">
      <errorparser
            class="org.eclipse.photran.internal.errorparsers.FErrorParser">
      </errorparser>
   </extension>
<!-- =================================================================================== -->
<!-- FDT Fortran Nature                                                                  -->
<!-- =================================================================================== -->
   <!--extension
         id="fnature"
         name="%fnature.name"
         point="org.eclipse.core.resources.natures">
      <runtime>
         <run
               class="org.eclipse.photran.core.FortranProjectNature">
         </run>
      </runtime>
   </extension-->
<!-- =================================================================================== -->
<!-- FDT file type mappings                                                              -->
<!-- =================================================================================== -->
   <extension
         point="org.eclipse.cdt.core.CLanguage">
      <language
            name="Fortran"
            id="org.eclipse.photran.core.language.fortran">
      </language>
   </extension>
   <extension
         point="org.eclipse.cdt.core.CFileType">
      <fileType
            name="%fileTypeMapping.fortranSourceFile"
            type="source"
            id="org.eclipse.photran.core.fileType.fortran_source"
            language="org.eclipse.photran.core.language.fortran">
      </fileType>
      <fileType
            name="%fileTypeMapping.fortranHeaderFile"
            type="header"
            id="org.eclipse.photran.core.fileType.fortran_header"
            language="org.eclipse.photran.core.language.fortran">
      </fileType>
   </extension>
   <extension
         point="org.eclipse.cdt.core.CFileTypeAssociation">
      <association
            type="org.eclipse.photran.core.fileType.fortran_source"
            pattern="*.f,*.f77,*.f90,*.f95">
      </association>
      <association
            type="org.eclipse.photran.core.fileType.fortran_header"
            pattern="*.fh">
      </association>
   </extension>
<!-- =================================================================================== -->
<!-- Some well known Fortran file extensions override for the team plugins               -->
<!-- =================================================================================== -->
   <!--extension
         point="org.eclipse.team.core.fileTypes">
      <fileTypes
            type="text"
            extension="f">
      </fileTypes>
      <fileTypes
            type="text"
            extension="f77">
      </fileTypes>
      <fileTypes
            type="text"
            extension="f90">
      </fileTypes>
      <fileTypes
            type="text"
            extension="f95">
      </fileTypes>
      <fileTypes
            type="text"
            extension="fh">
      </fileTypes>
   </extension-->

<!-- =================================================================================== -->
<!-- Define Fortran file ContentTypes                                                   -->
<!-- =================================================================================== -->
  <extension point="org.eclipse.core.runtime.contentTypes">
  
      <!-- A "base" content type, so that we can refer to both free and fixed form at once -->
	  <content-type id="fortranSource" name="Fortran Source File"
		  base-type="org.eclipse.core.runtime.text"
		  priority="high"/>
  
      <!-- Individual content types for free and fixed format -->
	  <content-type id="freeFormFortranSource" name="Fortran Source File - Free Format"
		  base-type="org.eclipse.photran.core.fortranSource"
		  file-extensions="f77,f90,f95"
		  priority="high"/>

	  <content-type id="fixedFormFortranSource" name="Fortran Source File - Fixed Format"
		  base-type="org.eclipse.photran.core.fortranSource"
		  file-extensions="f,for,ftn,fix,fpp,F,FOR,FTN,FIX,FPP"
		  priority="high"/>
  </extension>

   <!-- JO -->
   <!--extension point="org.eclipse.cdt.core.AdditionalLanguages">
      <language
         class="org.eclipse.photran.core.FortranLanguage" />
   </extension-->
   <extension
         point="org.eclipse.cdt.core.language">
      <language
            class="org.eclipse.photran.core.FortranLanguage"
            id="fortran"
            name="Fortran">
         <contentType id="org.eclipse.photran.core.fixedFormFortranSource"/>
         <contentType id="org.eclipse.photran.core.freeFormFortranSource"/>
      </language>
   </extension>

<!-- =================================================================================== -->
<!-- Initialize the preference for the Core Plugin                                       -->
<!-- =================================================================================== -->
   <extension point="org.eclipse.core.runtime.preferences">
      <initializer class="org.eclipse.photran.core.FortranCorePreferenceInitializer"/>
   </extension>

</plugin>
