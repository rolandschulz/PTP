<html>
<head>
<title>Launching Parallel Programs </title>
<link rel="stylesheet" type="text/css" href="help.css">
<script type="text/javascript" src="thumb.js"> </script>
</head>
<body>

<h1 id="top">Launching Parallel Programs</h1>
<p>This section describes how to launch a parallel program. Launching requires the services of a resource manager, which should have been set up as described in <a href="02resMgrSetup.html">Resource Managers</a>. PTP is able to launch applications that have been compiled to use an MPI runtime system, those compiled to use the OpenMP system, and a combination of MPI and OpenMP. It is also possible to launch multiple copies of a sequential program so that they execute simultaneously.

<p>Topics  include:
<ol>
<li><a href="#create">Creating a parallel launch configuration</a></li>
<li><a href="#resources">Completing the <b>Resources tab</b></a></li>
<li><a href="#application">Completing the <b>Application tab</b></a></li>
<li><a href="#synchronize">Completing the <b>Synchronize tab</b></a></li>
<li><a href="#debugger">Completing the <b>Debugger tab</b></a></li>
<li><a href="#arguments">Completing the <b>Arguments tab</b></a></li>
<li><a href="#launch">Launching the application</b></a></li>
</ol>

<h2 id="create">Step 1: Create a parallel launch configuration</h2>
<p>Note: At least one resource manager must have been configured and started before it is possible to create
a parallel launch configuration.
<ol>
<li><p>Open the run configuration dialog using <b>Run &gt; Open Run Dialog...</b>
or click the run icon menu on the tool bar and select <b>Open Run Dialog...</b></p><p><br></p></li>
<li><p>Create a new parallel launch configuration by clicking <b>Parallel Application</b> and
then clicking on the <b>New</b> button icon.</p><p><br></p>
<p><img src="images/03launch1.png"></p><p><br></p>
</li>
<li><p>Enter a name for the configuration in the <b>Name:</b> field. Here we use the same name as the project.</p></li>
</ol>

<h2 id="resources">Step 2: Complete the Resources tab</h2>
<p>The <b>Resources tab</b> is used to specify the resources required for the job execution. The contents of this tab will vary for different resource managers. This description only applys to the Open MPI and MPICH2 resource managers.</p>
<ol>
<li><p>Select a resource manager from the drop-down (Note: a resource manager
must be running for it to appear in the list. If there is only one resource manager running, then it will be
automatically selected.)</p><p><br></p></li>
<li><p>Some resource managers require a job queue to be selected using a <b>Queue:</b> drop-down. If there is
no drop-down, then this resource manager does not support multiple queues.</p><p><br></p></li>
<li><p>Enter a value in the <b>Number of Processes</b> field. This field must be greater than 0 in 
order to launch a job, and specifies the number of processes to use for the application launch.</p><p><br></p>
<p><img src="images/03launchResTab.png"></p>
</li>
</ol>

<h2 id="application">Step 3: Complete the <b>Application</b> tab</h2>
<p>The <b>Application tab</b> is used to specify the application (executable) to be launched.</p>
<ol>
<li><p>Ensure that the correct the <b>Parallel Project</b> is selected. This is the project containing the source
and binaries for the application.</p><p><br></p></li>

<li><p>Select the <b>Application Program</b> (executable) you wish to launch. 
If the Resource Manager is connected to a remote target, then this means the path of the executable on the remote target. 
Otherwise, for a Resource Manager on the local machine, it should be the path to the executable within the project directory. </p><p><br></p></li>

<li><p>If you are running the application on a remote machine and the project was <i>built</i> locally, then you will have to copy 
the executable to the remote machine first. For this purpose, you may enable <b>Copy executable from local filesystem</b> and fill
<b>Path to the local file</b> with the path to the executable within the project directory. This configures the launcher to copy the 
executable automatically to the remote target before starting the run/debug session. If not enabled, then you will need to
copy the executable manually to the remote target.</p>
<p><br></p>
</li>
<p><img src="images/03launch6.png"></p><p><br></p>

<li><p>If you wish to have the output from all processes in a single output console,
check the <b>Display combined output in a console view</b> option.</p><p><br></p>
</li>
</ol>

<h2 id="synchronize">Step 4: Complete the <b>Synchronize</b> tab</h2>
<p>
The <b>Synchronize tab</b> is used in scenarios where the Resource Manager is connected to a remote target.
The tab specifies rules that describe files or directories that need to be copied (<i>uploaded</i>) to the remote target before starting the parallel application execution. 
Typically, this feature is used to upload dependencies (like dynamic libraries) or input data for test cases.
</p>
<p>
This tab also allows to specify rules describing files on the remote host to be retrieved back (<i>downloaded</i>) to the local host after the parallel application finishes execution, as output data produced by the parallel application execution.
</p>

<ol>
<li><p>If you wish to enable file transfer to the remote target, enable the <b>Upload rules enabled</b> or
<b>Download rules enabled</b> according which direction of file transfer is required.</p>
<p><img src="images/03launch7.png"></p><p><br></p>
</li>

<li>
<p>
In order to specify files to be copied to the remote target (<i>uploaded</i>), click on <b>New upload rule</b>.
</p>
<p>
An upload rule lists a collection of files or directories that shall be copied into a single directory.
</p>
<p>
If <b>Use directory from launch configuration</b> is enabled, then the listed files or directories are copied to the working directory specified on the launch configuration. 
At the moment, this is equivalent to same directory that contains the executable for the parallel application. 
If not enabled, they you must specify on <b>Remote directory</b> a path where the files or directories will be placed. 
The path may be absolute or relative (to the working directory).
</p>
<p>
In the list underneath, <b>Selected file(s)</b>, add the files or directories that shall be copied.
Click on <b>File(s)</b> to  select one or more individual files from anywhere in the local file system. 
The <b>Directory</b> button works similarly to select a directory from the local file system. 
Directories are copied recursively. 
The <b>Workspace</b> button allows easily choosing files from the current workspace.
</p>
<p>
On the bottom of the dialog, you may wish to set attributes to be applied to the copied files on the remote target. 
The options <b>Readonly</b> or <b>Executable</b> sets all copied files to read-only or executable on the remote host.
If <b>Preserve time attributes</b> is enabled, then the remote copy will assume the same time stamp then the local file, otherwise, the time stamp will be the time the file was copied.
Also, if the file already exists on the remote target, you may choose how to react in <b>If file already exists</b>.
<p><img src="images/03launch8.png"></p><p><br></p>
<p><br></p>
</li>
<li>
In order to specify files to be copied from the remote target (<i>downloaded</i>) after the parallel application finishes, click on <b>New download rule</b>.
</p>
<p>
An download rule  lists a collection of files or directories that shall be copied into a single local directory. 
Its optins are very similar to the upload rule.
</p>
<p><img src="images/03launch9.png"></p><p><br></p>
<p><br></p>
</li>
</ol>

<h2 id="debugger">Step 5: Complete the Debugger tab</h2>
<p>The <b>Debugger tab</b> is only required if you are planning to debug the application. However 
it is a good idea to complete it now, even if you are only planning to launch a non-debug job.</p>
<ol>
<li><p>If no debugger is visible in the <b>Debugger</b> drop-down, select one. This is the debugger that will control 
the parallel debug session. Currently only <b>SDM</b> is supported (SDM stands for Scalable Debug 
Manager), so select this.</p><p><br></p></li>
<li><p>If you wish the debugger to automatically suspend the application on launch, make sure 
<b>Stop in main() on startup</b> is checked</p><p><br></p></li>
<li><p>Under Debugger options, make sure that the path to debugger executable is correct.</p><p><br></p>
<p>If you are debugging on the local machine, this path should point to the <code>sdm</code> executable 
in your Ecilpse installation's <code>plugins/org.eclipse.ptp.<i>os.arch_version</i>/bin</code> directory,
where <code><i>os.arch_version</i></code> is your operating system (<code>linux</code>, <code>macosx</code>, or <code>aix</code>), 
architecture (<code>x86</code>, <code>x86_64</code>, or <code>ppc</code>), and version number of the plugin (e.g. <code>2.1.0.200810311901</code>).</p><p><br></p>
<p>If you are debugging remotely, then this path will be the path to where the <code>sdm</code> executable was installed on the remote machine.</p><p><br></p></li>
<li><p>Set the <b>Debugger session address</b>. This is the address that the debugger will connect 
to when it starts, and will depend on where you are launching the application:</p><p><br></p>
<ul>
<li><p>If you are launching onto the local machine, use <code>localhost</code> (some systems will 
accept <code>localhost.localdomain</code>).</p><p><br></p></li>
<li><p>If you are launching onto a remote machine without using port forwarding (as specified in the 
resource manager configuration), then this should be the address of the local machine (the one 
running Eclipse) <i>as viewed from one of the nodes of the parallel machine</i>. Note that if the 
parallel machine configuration precludes nodes accessing your local machine, you will need to 
reconfigure the resource manager to use port forwarding.</p><p><br></p></li>
<li><p>If you are launching onto a remote machine using port forwarding, this is the address of the 
remote machine <i>as viewed from one of its nodes</i>. Note that you will need to have the <code>GatewayPorts</code> option set to <code>yes</code>
in the <code>sshd</code> configuration file on the remote system (see the manual page for <code>sshd_config</code>) for this to work.</p><p><br></p>
<p><img src="images/03launch5.png"></p>
</p></li>
</ul>

</li>
</ol>

<h2 id="arguments">Step 6: Complete the Arguments tab</h2>
<p></p>
<ol>
<li><p>Enter any <i>program</i> arguments.</p><p><br></p></li>
<li><p>Select a different working directory if desired. Note that for a remote launch, this will be 
the location of the execution on the remote machine.</p></li>
</ol>

<h2 id="launch">Step 6: Launching the application</h2>
<p>The launch configuration is now complete. Click on the <b>Run</b> button to launch the program.
At this point the application should begin execution. 
The <a href="05monitoring.html">Monitoring Parallel Machines and Jobs</a> section will show you how to
monitor the program's execution.</p>



<p><a href="#top">Back to Top</a> | <a href="toc.html">Back to Table of Contents</a>

</body>
</html>




