<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>The PTP Configurable Resource Manager</title>
<link rel="stylesheet" type="text/css" href="help.css">
</head>
<body>
	<h1>The PTP Configurable Resource Manager</h1>
	<h2>
		<a name="Introduction">Introduction</a>
	</h2>
	<p>
		The JAXB Resource Manager plug-ins, part of the <a
			href="PLUGINS_ROOT/org.eclipse.ptp.doc.user/html/toc.html">
			Parallel Tools Platform</a> (PTP), allow you to launch and monitor
		applications on local or remote resources using resource managers
		which are configured from an XML file via JAXB (
		<code>javax.xml.bind</code>
		) technology.<br>
	</p>
	<p>There are two main motivations for providing this class of
		resource managers:</p>
	<ol>
		<li>To allow for maximum configurability. Often job schedulers
			(PBS, LSF, LoadLeveler, etc.) or interactive runtime systms (OpenMPI,
			PE, SLURM, etc.) are set up by system administrators in special or
			non-standard ways which make it difficult to use a generic tool. The
			configuration file allows a user or community of users to fit the
			resource manager to a class of systems or even to a single host.</li>
		<li>Building the resource manager and its UI presentation from an
			XML configuration means that in most cases no special coding is
			necessary. Users should be able to accommodate new systems, at least
			on the client-end, without writing and loading additional Eclipse
			plugins. (The only qualification here is that the monitoring
			component also support that type of scheduler or runtime; see the
			following paragraphs.)</li>
	</ol>
	<p>An additional consideration in designing a generically
		configurable resource manager was to partition the client
		functionality so as to eliminate the need for special server-side
		proxies and to scale more successfully in the updating of job and
		resource information.</p>
	<p>
		To this end, JAXB resource managers now consist of two components, a
		"control", which governs the configuration, launch and cancellation of
		individual jobs entirely from the client end, and a "monitor", which
		displays job status as well as global information about the HPC
		resource. In most cases, the monitor will be a pre-built type provided
		by the PTP distribution, either a generic class for handling
		interactive submissions, or a batch-system monitor implemented using <a
			href="http://www2.fz-juelich.de/jsc/llview">LLview</a>. Since <b>LLview</b>
		already supports a good number of the standard scheduler types, adding
		a new resource manager type will normally entail only the specific
		configuration of its control part. We plan to make available both
		user-initiated as well as system-wide deployment of the necessary
		LLview parts (mostly Perl scripts) for monitoring the target resource.
	</p>
	<h2>
		<a name="Requirements">Requirements</a>
	</h2>
	<p>In addition to having Eclipse and PTP installed, you need to
		have the following software dependencies installed.</p>
	<ul>
		<li>CDT for Indigo, available from the Eclipse download site or
			as part of the pre-built PTP package;</li>
		<li>RSE for Indigo, available from the Eclipse download site or
			as part of the pre-built PTP package.</li>
	</ul>
	<p>If the monitor of any JAXB resource manager uses LLview, an
		LLview server must be set up separately or an installation must be
		available to point the client monitoring component to; as mentioned
		above, we plan to provide a user-initiated automatic deployment
		version of the LLview monitor.</p>
	<p>
		<b>There are two main sections to the help pages which follow. The
			first concerns creating or modifying a resource manager
			configuration; the second are some general guidelines for using the
			JAXB resource managers. For those interested only in using the JAXB
			resource managers already provided with the PTP distribution, the
			first section may be skipped.</b>
	</p>
	<hr>

	<h2>
		<a name="Configuring">Configuring the Resource Manager</a>
	</h2>

	<p>
		The JAXB Resource Manager is <b><i>model-driven</i> </b>; this means
		that its functioning and appearance are determined by a set of
		definitions provided usually via an XML file. What folllows is a
		detailed explanation of the schema governing the resource manager XML
		configuration.
	</p>

	<h3>
		<a name="ResourceManagerData">The Resource Manager Data Type</a>
	</h3>
	<img alt="ResourceManagerData" src="images/01rm-data.jpeg" />
	<br>

	<p>
		The top-level of the definition tree consists of three elements: <b>site-</b>,
		<b>control-</b> and <b>monitor-data</b>. In addition, a resource
		manager should be given a name which sufficiently distinguishes it
		from others of a similar type; e.g., <i>pbs-torque-v_2.3.7_abe</i> is
		specific to an installation on the host abe, <i>ll-v_4.0</i> suits all
		installations of LoadLeveler version 4, etc.
	</p>
	<p>
		The <b>site-data</b> element provides an optional place to set default
		remote site information. The connection strings are URIs which are
		specific to the PTP RemoteServices definitions. The scheme for these
		URIs will usually name the specific remote service (e.g,
		<code>rse:</code>
		or
		<code>remotetools:</code>
		; local is simply
		<code>file:</code>
		). The host name and port given here will appear as defaults in the
		resource manager selection wizard when you create a new connection.
	</p>

	<p>
		The principal section of the schema is devoted to defining the
		resource manager's <b>control</b> part. The top-level control elements
		include properties and attributes, files to be staged, job script to
		be generated (if any), commands specific to the resource manager, and
		the layout of the Launch Tab.
	</p>
	<p>
		The resource manager implementation constructs a variable map from the
		defined properties and attributes which serves as the resource manager
		"environment"; these variables are dereferenced in the configuration
		file via
		<code>
			${ptp_rm:name#<i>fieldName</i>}
		</code>
		, e.g.,
		<code>${ptp_rm:queues#value}</code>
		(see further below on the fields for properties and attributes); all
		properties and attributes defined in the configuration are mapped. The
		following hard-coded properties are also added at runtime: <br> <br>
		<code>control.user.name</code>
		<br>
		<code>control.address</code>
		<br>
		<code>control.workding.dir</code>
		<br>
		<code>executablePath</code>
		<br>
		<code>progArgs</code>
		<br>
		<code>directory</code>
		<br>
	</p>
	<p>
		<i>Commands</i> are externally executed calls, either to a local or
		remote OS, depending on the connection defined for the resource
		manager. The <b>start-up-</b> and <b>shut-down-command</b>s are
		arbitrary commands to be run (in order) at startup or exit. The <b>submit</b>
		commands are those used to launch jobs. Currently a configuration may
		have only a batch or an interactive mode. Thus it may have only two
		submission modes, a run and a debug, for the given type. In the future
		we may allow all four to coexist in a single configuration. <b>get-job-status</b>
		is a user-initiated (on-demand) request to refresh the status
		information for a submission. Normal (polled) updates are the
		responsibility of the monitor. The command nevertheless needs to be
		implemented in most cases, as it will be called internally just after
		submission. The remaining commands are operations which can be applied
		to running jobs; with the exception of <i>terminate</i>, the rest of
		these have to do with schedulers (batch-systems) and do not apply to
		resource managers which connect to interactive runtime-systems such as
		OpenMPI or PE. <b>Note</b>: if the submission type is interactive, the
		<b>terminate-job</b> command usually does not need to be implemented,
		as the process termination will be handled internally. However, in
		some cases (such as PBS -I) which require the interactive job to run
		as a pseudo-terminal, one may need this command in order to force its
		termination externally.
	</p>

	<h3>
		<a name="ControlType">The Control Data Type</a>
	</h3>
	<img alt="ControlData" src="images/02control.jpeg" />
	<br>
	<p>The majority of the XML definition is given over to the set-up
		of the Resource Manager control. One can think of this section as
		having four subdivisions:</p>
	<ol>
		<li>Configuration Variable Definitions (the «Environment»)</li>
		<li>Files and Scripts</li>
		<li>External Commands and their Stream Parsers</li>
		<li>UI Configuration (Launch Tab)</li>
	</ol>

	<p>We will look at these each in turn.</p>

	<h4>
		<a name="PropertyAttributeType">Property and Attribute Types</a>
	</h4>
	<p>
		A property is any variable necessary for the functioning of the
		resource manager. Properties often (but not necessarily) are not
		visible. The value for properties can be any primitive type, or lists
		or maps of strings. If
		<code>stdout</code>
		and
		<code>stderr</code>
		from a scheduled job is to be delivered to the client, the properties
		<i>stdout_remote_path</i> and <i>stderr_remote_path</i> should be
		included in the resource manager property set.
	</p>


	<p>NOTE: the untyped "value" element on properties is for internal
		use only; to give a predefined (primitive) value, use the "default"
		element along with the "type" attribute.</p>

	<p>
		<a href="resource_manager_type.xsd">XML Resource Manager Schema</a><br>
	</p>
	<hr>
	<h2>
		<a name="Using">Using the Resource Manager</a>
	</h2>

	<hr>
	<p>
		<a href="toc.html">Back to Table of Contents</a>
	</p>
</body>
</html>
