--- /dev/null	Tue Mar 25 17:08:18 2003
+++ gdb-5.0/gdb/aif-valprint.c	Tue Mar 25 17:15:29 2003
@@ -0,0 +1,1135 @@
+/* Support for printing C and C++ types for GDB, the GNU debugger.
+   Copyright 1986, 1988, 1989, 1991, 1993-1996, 1998-2000
+   Free Software Foundation, Inc.
+
+   This file is part of GDB.
+
+   This program is free software; you can redistribute it and/or modify
+   it under the terms of the GNU General Public License as published by
+   the Free Software Foundation; either version 2 of the License, or
+   (at your option) any later version.
+
+   This program is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330,
+   Boston, MA 02111-1307, USA.  */
+
+#include "defs.h"
+#include "obstack.h"
+#include "bfd.h"		/* Binary File Description */
+#include "symtab.h"
+#include "gdbtypes.h"
+#include "expression.h"
+#include "value.h"
+#include "valprint.h"
+#include "gdbcore.h"
+#include "target.h"
+#include "command.h"
+#include "gdbcmd.h"
+#include "language.h"
+#include "demangle.h"
+#include "c-lang.h"
+#include "typeprint.h"
+#include "ui-file.h"
+
+#include "gdb_string.h"
+#include "aif.h"
+#include <errno.h>
+#include <ctype.h>
+void mem_file_delete (struct ui_file *file);
+
+
+/* the following comes from the aif library, conv.c, written by Greg. */
+
+#ifdef WINDOWSNT
+#define BITSPERBYTE	8
+#else /* WINDOWSNT */
+#include	<values.h>
+#endif /* WINDOWSNT */
+
+union ieee_double
+{
+	float		f;
+	double		d;
+#ifdef HAVE_LONG_DOUBLE
+	long double	l;
+#endif /* HAVE_LONG_DOUBLE */
+	char		c[sizeof(DOUBLEST)];
+};
+
+
+/* For linked data structures, we check for circularity by recording the values
+ * of all pointers and types we see.  In a later pass, we emit a name on those
+ * types and an offset for those values
+ * that appear more than once. */
+struct value_info {
+  CORE_ADDR addr;
+  int used; /* 0: appears, not pointed to.  1: is pointed to.  2: value has been
+    emitted */
+};
+struct type_info {
+  struct type *type;
+  int used; /* 0: appears, not pointed to.  1: is pointed to.  2: name has been
+    emitted */
+};
+
+#define MAX_VALUES_SEEN 1000
+	/* hope that the structure doesn't have more distinct pointer values */
+struct value_info valuesSeen[MAX_VALUES_SEEN+1]; /* extra space for
+  pseudo-data */
+int numValuesSeen;
+#define MAX_TYPES_SEEN 100
+	/* hope that the structure doesn't have more distinct types values */
+struct type_info typesSeen[MAX_TYPES_SEEN+1]; /* extra space for
+  pseudo-data */
+int numTypesSeen;
+
+typedef enum {doType, doValue} doWhat;
+
+struct str_type
+{
+	int	blen;
+	int	slen;
+	int	end;
+	char *	buf;
+};
+
+typedef struct str_type *	str_ptr;
+
+str_ptr str_init(void);
+void str_add(str_ptr, char *);
+void str_free(str_ptr);
+char *str_val(str_ptr);
+str_ptr str_dup(char *);
+
+/* fill in the valuesSeen array with all the pointer values we see */
+void aif_discover(type, valaddr, what)
+  struct type *type;
+  char *valaddr;
+  doWhat what;
+{
+  int valuesSeenIndex;
+  struct type *elttype;
+  unsigned int eltlen, offset;
+  CORE_ADDR addr;
+  switch (TYPE_CODE (type))
+    {
+    case TYPE_CODE_TYPEDEF:
+      aif_discover(TYPE_TARGET_TYPE (type), valaddr, what);
+      break;
+
+    case TYPE_CODE_PTR:
+    case TYPE_CODE_REF:
+      if (what == doValue)
+      { /* looking for values */
+	value_ptr deref_val;
+	addr = unpack_pointer (type, valaddr);
+	if (addr == 0) break;
+	elttype = check_typedef (TYPE_TARGET_TYPE (type));
+	if (TYPE_CODE(elttype) != TYPE_CODE_PTR &&
+	  TYPE_CODE(elttype) != TYPE_CODE_REF &&
+	  TYPE_CODE(elttype) != TYPE_CODE_STRUCT)
+	  break; /* no need to remember pointers not leading to cycles */
+	for (valuesSeenIndex = 0; valuesSeenIndex < numValuesSeen;
+	valuesSeenIndex++)
+	{
+	  if (addr == valuesSeen[valuesSeenIndex].addr)
+	  {
+	    valuesSeen[valuesSeenIndex].used = 1; /* found a circularity */
+	    return;
+	  }
+	}
+	if (numValuesSeen < MAX_VALUES_SEEN)
+	  {
+	    valuesSeen[numValuesSeen].addr = addr;
+	    valuesSeen[numValuesSeen].used = 0;
+	    numValuesSeen += 1;
+	  }
+	/*
+	** Check addr is valid!
+	*/
+	if ( check_value(elttype, addr, &deref_val) )
+		aif_discover(elttype, VALUE_CONTENTS (deref_val), what);
+	break;
+      } else {
+	/* looking for types */
+	int typesSeenIndex;
+	elttype = check_typedef (TYPE_TARGET_TYPE (type));
+	if (TYPE_CODE(elttype) != TYPE_CODE_PTR &&
+	  TYPE_CODE(elttype) != TYPE_CODE_REF &&
+	  TYPE_CODE(elttype) != TYPE_CODE_STRUCT)
+	  break; /* no need to remember pointers not leading to cycles */
+	for (typesSeenIndex = 0; typesSeenIndex < numTypesSeen;
+	typesSeenIndex++)
+	{
+	  if (elttype == typesSeen[typesSeenIndex].type)
+	  {
+	    typesSeen[typesSeenIndex].used = 1; /* found a circularity */
+	    return;
+	  }
+	}
+	if (numTypesSeen < MAX_TYPES_SEEN)
+	  {
+	    typesSeen[numTypesSeen].type = elttype;
+	    typesSeen[numTypesSeen].used = 0;
+	    numTypesSeen += 1;
+	  }
+	aif_discover(elttype, 0, what);
+	break;
+      } /* discover types */
+
+    case TYPE_CODE_STRUCT:
+    case TYPE_CODE_UNION:
+      { /* discover either values or types */
+	int i;
+      	struct field *thisField;
+	struct type *ftype;
+	value_ptr v;
+
+	for ( i = 0; i < TYPE_NFIELDS(type); i++ )
+	{
+		if ( TYPE_FIELD_IGNORE(type, i) )
+			continue;
+
+		if ( what == doType )
+		{
+			aif_discover(TYPE_FIELD_TYPE(type, i), 0, what);
+			continue;
+		}
+
+		if 
+		(
+			!TYPE_FIELD_STATIC(type, i) 
+			&& 
+			TYPE_FIELD_PACKED(type, i)
+		)
+		{
+			v = value_from_longest(TYPE_FIELD_TYPE(type, i),
+				unpack_field_as_long (type, valaddr, i));
+
+			aif_discover(TYPE_FIELD_TYPE (type, i), VALUE_CONTENTS(v), what);
+		}
+		else if ( TYPE_FIELD_STATIC (type, i) )
+		{
+			v = value_static_field (type, i);
+
+			if ( v == NULL )
+				continue;
+
+			/*
+			XXX
+			cp_print_static_field (TYPE_FIELD_TYPE (type, i), v,
+			stream, format, recurse + 1,
+			pretty);
+			*/
+		}
+		else
+		{
+			aif_discover(TYPE_FIELD_TYPE(type, i), valaddr + TYPE_FIELD_BITPOS (type, i) / 8, what);
+		}
+	  }
+      }
+      break;
+
+    case TYPE_CODE_ARRAY:
+      elttype = check_typedef (TYPE_TARGET_TYPE (type));
+      if (what == doValue)
+      { /* looking for values */
+	unsigned int temp_len, len;
+	eltlen = TYPE_LENGTH (elttype);
+	len = TYPE_LENGTH (type) / eltlen;
+	offset = 0;
+	for (temp_len = 0; temp_len < len; temp_len++)
+	  {
+	    aif_discover(elttype, valaddr+offset, what);
+	    offset += eltlen;
+	  }
+      } else { /* looking for types */
+	aif_discover(elttype, 0, what);
+      } /* TYPE_CODE_ARRAY */
+      break;
+
+    case TYPE_CODE_MEMBER:
+    case TYPE_CODE_METHOD:
+    case TYPE_CODE_FUNC:
+    case TYPE_CODE_UNDEF:
+    case TYPE_CODE_ENUM:
+    case TYPE_CODE_BOOL:
+    case TYPE_CODE_INT:
+    case TYPE_CODE_FLT:
+    case TYPE_CODE_VOID:
+    case TYPE_CODE_ERROR:
+    case TYPE_CODE_CHAR:
+    case TYPE_CODE_SET:
+    case TYPE_CODE_RANGE:
+    case TYPE_CODE_STRING:
+    case TYPE_CODE_BITSTRING:
+    case TYPE_CODE_COMPLEX:
+    case TYPE_CODE_TEMPLATE:
+      break;
+
+    default:
+      error ("type not handled in type_discover");
+      break;
+    } /* switch (TYPE_CODE (type)) */
+} /* aif_discover */
+
+/* squash the valuesSeen and typesSeen arrays to remove unnecessary elements */
+void aif_reduce()
+{
+  int front, back;
+  front = back = 0;
+  while (front < numValuesSeen)
+    {
+      /* move back to first unused entry */
+      valuesSeen[numValuesSeen].used = 0; /* pseudo-data */
+      while (valuesSeen[back].used) back += 1;
+      if (back == numValuesSeen) break;
+      /* move front to first used entry beyond back */
+      if (front <= back) front = back+1;
+      valuesSeen[numValuesSeen].used = 1; /* pseudo-data */
+      while (!valuesSeen[front].used) front += 1;
+      if (front == numValuesSeen) break;
+      /* copy from front to back */
+      valuesSeen[back] = valuesSeen[front];
+      valuesSeen[front].used = 0;
+    }
+  numValuesSeen = back;
+  front = back = 0;
+  while (front < numTypesSeen)
+    {
+      /* move back to first unused entry */
+      typesSeen[numTypesSeen].used = 0; /* pseudo-data */
+      while (typesSeen[back].used) back += 1;
+      if (back == numTypesSeen) break;
+      /* move front to first used entry beyond back */
+      if (front <= back) front = back+1;
+      typesSeen[numTypesSeen].used = 1; /* pseudo-data */
+      while (!typesSeen[front].used) front += 1;
+      if (front == numTypesSeen) break;
+      /* copy from front to back */
+      typesSeen[back] = typesSeen[front];
+      typesSeen[front].used = 0;
+    }
+    numTypesSeen = back;
+} /* aif_reduce */
+
+int dataStreamPos;
+
+void emitData(toEmit, stream)
+  char toEmit;
+  struct ui_file *stream;
+{
+  fprintf_filtered(stream, "%02x", toEmit & 0xff);
+  dataStreamPos += 1;
+} /* emitData */
+  
+/* defined in valprint.c: */
+int
+partial_memory_read (CORE_ADDR memaddr, char *myaddr, int len, int *errnoptr);
+
+void
+aif_emit_string (addr, stream)
+     CORE_ADDR addr;
+     struct ui_file *stream;
+{ /* code modified from val_print_string () */
+  int errcode;			/* Errno returned from bad reads. */
+  unsigned int fetchlimit;	/* Maximum number of chars to print. */
+  unsigned int nfetch;		/* Chars to fetch / chars fetched. */
+  unsigned int chunksize;	/* Size of each fetch, in chars. */
+  char *buffer = NULL;		/* Dynamically growable fetch buffer. */
+  char *bufptr;			/* Pointer to next available byte in buffer. */
+  char *limit;			/* First location past end of fetch buffer. */
+  struct cleanup *old_chain = NULL;	/* Top of the old cleanup chain. */
+  int found_nul;		/* Non-zero if we found the nul char */
+  unsigned long bufsize = 0;
+  int length;			/* how long the string turned out to be */
+
+  if (addr == 0)
+  {
+      emitData(0, stream);
+      emitData(0, stream);
+      return;
+  }
+
+  fetchlimit = print_max;
+  chunksize = min (8, fetchlimit);
+  /* Loop until we either have all the characters to print, or we encounter
+     some error, such as bumping into the end of the address space. */
+  found_nul = 0;
+  old_chain = make_cleanup (null_cleanup, 0);
+  do
+    {
+      QUIT;
+      nfetch = min (chunksize, fetchlimit - bufsize);
+      if (buffer == NULL)
+	buffer = (char *) xmalloc (nfetch);
+      else
+	{
+	  discard_cleanups (old_chain);
+	  buffer = (char *) xrealloc (buffer, nfetch + bufsize);
+	}
+      old_chain = make_cleanup (free, buffer);
+      bufptr = buffer + bufsize;
+      bufsize += nfetch;
+      /* Read as much as we can. */
+      nfetch = partial_memory_read (addr, bufptr, nfetch, &errcode);
+      /* Scan this chunk for the null byte */
+      limit = bufptr + nfetch;
+      while (bufptr < limit)
+	{
+	  unsigned long c;
+	  c = extract_unsigned_integer (bufptr, 1);
+	  addr += 1;
+	  bufptr += 1;
+	  if (c == 0)
+	    {
+	      /* We don't care about any error which happened after
+		  the NULL terminator.  */
+	      errcode = 0;
+	      found_nul = 1;
+	      break;
+	    }
+	} /* while (bufptr < limit) */
+    } /* do */
+  while (errcode == 0	/* no error */
+	  && bufptr - buffer < fetchlimit	/* no overrun */
+	  && !found_nul);	/* haven't found nul yet */
+  QUIT;
+  length = 0;
+  if (errcode == 0 || bufptr > buffer)
+    {
+      length = bufptr - buffer - 1; /* don't include null */
+      emitData((length >> 8) & 077, stream);
+      emitData(length & 077, stream);
+      for (; length > 0; length--) {
+	emitData(*buffer++, stream); 
+      }
+    }
+  if (errcode != 0)
+    {
+      if (errcode == EIO)
+	{
+	  fprintf_filtered (stream, " <Address ");
+	  print_address_numeric (addr, 1, stream);
+	  fprintf_filtered (stream, " out of bounds>");
+	}
+      else
+	{
+	  fprintf_filtered (stream, " <Error reading address ");
+	  print_address_numeric (addr, 1, stream);
+	  fprintf_filtered (stream, ": %s>", safe_strerror (errcode));
+	}
+    }
+  gdb_flush (stream);
+  do_cleanups (old_chain);
+  return;
+} /* aif_emit_string */
+
+str_ptr
+gdb_type_to_fds(type)
+	struct type *	type;
+{
+	int		len;
+	int		elen;
+	int		nfields;
+	int		i;
+	int		ix;
+	str_ptr		s;
+	str_ptr		type_ptr;
+	str_ptr		type_str;
+	struct type *	etype;
+
+	CHECK_TYPEDEF (type);
+
+	type_str = str_init();
+
+	for ( ix = 0; ix < numTypesSeen; ix++)
+	{
+		if 
+		(
+			typesSeen[ix].type != type
+			||
+			!typesSeen[ix].used
+		)
+			continue;
+
+		/*
+		** Multiple use type
+		*/
+
+		if ( typesSeen[ix].used != 1 )
+		{
+			/* 
+			** referring to one already emitted 
+			*/
+
+			str_add(type_str, TypeToFDS(AIF_REFERENCE, ix));
+			return type_str;
+		}
+
+		/*
+		** first time; emit name
+		*/
+
+		str_add(type_str, TypeToFDS(AIF_NAME, ix, NULL));
+		typesSeen[ix].used = 2;
+		break;
+	}
+
+	len = TYPE_LENGTH(type);
+
+	switch ( TYPE_CODE(type) )
+	{
+	case TYPE_CODE_TYPEDEF:
+		type_ptr = gdb_type_to_fds(TYPE_TARGET_TYPE(type));
+		str_add(type_str, str_val(type_ptr));
+		str_free(type_ptr);
+		return type_str;
+
+	case TYPE_CODE_ARRAY:
+		if 
+		(
+			len > 0
+			&&
+			TYPE_LENGTH(TYPE_TARGET_TYPE(type)) > 0
+		)
+		{
+			etype = check_typedef(TYPE_TARGET_TYPE (type));
+			elen = TYPE_LENGTH(etype);
+			len /= elen;
+
+			type_ptr = gdb_type_to_fds(etype);
+
+			str_add(type_str, TypeToFDS(AIF_ARRAY, 
+				TypeToFDS(AIF_RANGE, 0, len-1, 
+					TypeToFDS(AIF_INTEGER, 1, sizeof(int))),
+				str_val(type_ptr)));
+
+			str_free(type_ptr);
+			break;
+		}
+
+		/*
+		** Treat as a pointer...
+		*/
+
+	case TYPE_CODE_PTR:
+		etype = check_typedef(TYPE_TARGET_TYPE(type));
+		elen = TYPE_LENGTH(etype);
+
+		if 
+		(
+			elen == 1
+			&&
+			TYPE_CODE(etype) == TYPE_CODE_INT
+		)
+		{
+			str_add(type_str, TypeToFDS(AIF_STRING));
+		}
+		else
+		{
+			type_ptr = gdb_type_to_fds(etype);
+
+			str_add(type_str, 
+				TypeToFDS(AIF_POINTER, str_val(type_ptr)));
+
+			str_free(type_ptr);
+		}
+
+		break;
+
+	case TYPE_CODE_INT:
+		if
+		(
+			len != 1
+			||
+			strncmp(TYPE_NAME(type), "char", 5) != 0
+		) 
+		{
+			str_add(type_str, 
+				TypeToFDS(AIF_INTEGER, TYPE_UNSIGNED(type) ? 0 : 1, len));
+			break;
+		}
+
+		/*
+		** Treat as char...
+		*/
+
+	case TYPE_CODE_CHAR:
+		str_add(type_str, TypeToFDS(AIF_CHARACTER));
+		break;
+
+	case TYPE_CODE_FLT:
+		str_add(type_str, TypeToFDS(AIF_FLOATING, len));
+		break;
+
+	case TYPE_CODE_STRUCT:
+	case TYPE_CODE_UNION:
+		nfields = TYPE_NFIELDS(type);
+		
+		if ( HAVE_CPLUS_STRUCT(type) )
+			i = TYPE_N_BASECLASSES(type);
+		else
+			i = 0;
+
+		/*
+		** First need to calculate size of struct, since it
+		** may not be packed.
+		*/
+
+		for ( len = 0 ; i < nfields ; i++ )
+		{
+			if ( TYPE_FIELD_IGNORE(type, i) )
+				continue;
+
+			etype = check_typedef(TYPE_FIELD_TYPE(type, i));
+			elen = TYPE_FIELD_PACKED(type, i) ?
+					TYPE_FIELD_BITSIZE(type, i) / 8 :
+					TYPE_LENGTH(etype);
+
+			if ( TYPE_CODE(type) == TYPE_CODE_STRUCT )
+				len += elen;
+			else if ( elen > len )
+				len = elen;
+		}
+
+		type_ptr = str_dup(TypeToFDS(AIF_STRUCT));
+
+		/*
+		** Need to calculate offset (len).
+		*/
+		len = 0;
+
+		if ( HAVE_CPLUS_STRUCT(type) )
+			i = TYPE_N_BASECLASSES(type);
+		else
+			i = 0;
+
+		for (; i < nfields ; i++ )
+		{
+			char *t;
+
+			if ( TYPE_FIELD_IGNORE(type, i) )
+				continue;
+
+			etype = check_typedef(TYPE_FIELD_TYPE(type, i));
+
+			elen = TYPE_FIELD_PACKED(type, i) ?
+				TYPE_FIELD_BITSIZE(type, i) :
+				TYPE_LENGTH(etype) * 8;
+
+			s = gdb_type_to_fds(etype);
+
+			if ( HAVE_CPLUS_STRUCT(type) )
+			{
+				if ( TYPE_FIELD_PROTECTED(type, i) )
+					t = FDSAddFieldToClass(
+						str_val(type_ptr),
+					    	AIFACC_PROTECTED, 
+					    	TYPE_FIELD_NAME(type, i), 
+						str_val(s));
+				else if ( TYPE_FIELD_PRIVATE(type, i) )
+					t = FDSAddFieldToClass(
+						str_val (type_ptr), 
+						AIFACC_PRIVATE, 
+						TYPE_FIELD_NAME(type, i), 
+						str_val(s));
+				else
+					t = FDSAddFieldToClass(
+						str_val (type_ptr), 
+						AIFACC_PUBLIC, 
+						TYPE_FIELD_NAME(type, i), 
+						str_val(s));
+
+			}
+			else
+				t = FDSAddFieldToStruct(str_val(type_ptr), 
+					TYPE_FIELD_NAME(type, i), str_val(s));
+
+			str_free(type_ptr);
+			
+			type_ptr = str_dup(t);
+
+			str_free(s);
+
+			/*
+			** Calc offset.
+			*/
+			if ( TYPE_CODE(type) == TYPE_CODE_STRUCT )
+				len += elen;
+		}
+
+		str_add(type_str, str_val(type_ptr));
+		str_free(type_ptr);
+		break;
+
+	case TYPE_CODE_VOID:
+		str_add(type_str, TypeToFDS(AIF_VOID, len));
+		break;
+
+	case TYPE_CODE_ENUM:
+		nfields = TYPE_NFIELDS (type);
+
+		type_ptr = str_dup(TypeToFDS(AIF_ENUM));
+
+		for ( i = 0 ; i < nfields ; i++ )
+		{
+			char *	t;
+
+			t = FDSAddConstToEnum(str_val(type_ptr),
+					TYPE_FIELD_NAME(type, i),
+					TYPE_FIELD_BITPOS(type, i));
+
+			str_free(type_ptr);
+
+			type_ptr = str_dup(t);
+		}
+
+		str_add(type_str, str_val(type_ptr));
+		str_free(type_ptr);
+		break;
+
+	case TYPE_CODE_FUNC:
+		etype = check_typedef(TYPE_TARGET_TYPE (type));
+
+		type_ptr = gdb_type_to_fds(etype);
+
+		str_add(type_str, 
+			TypeToFDS(AIF_FUNCTION, str_val(type_ptr)));
+
+		str_free(type_ptr);
+		break;
+
+	case TYPE_CODE_STRING:
+	case TYPE_CODE_SET:
+	case TYPE_CODE_RANGE:
+	case TYPE_CODE_BITSTRING:
+	case TYPE_CODE_MEMBER:
+	case TYPE_CODE_METHOD:
+	case TYPE_CODE_REF:
+	case TYPE_CODE_BOOL:
+	case TYPE_CODE_COMPLEX:
+		str_add(type_str, TypeToFDS(AIF_INVALID));
+		break;
+
+	default:
+		error("Invalid C/C++ type code %d in symbol table.", TYPE_CODE(type));
+	}
+
+	return type_str;
+}
+
+void
+aif_val_print_recursive(type, valaddr, address, stream)
+	struct type *	type;
+	char *		valaddr;
+	CORE_ADDR	address;
+	struct ui_file *stream;
+{
+	int			ix;
+	int			res;
+	int			valid;
+	unsigned		len;
+	unsigned		eltlen;
+	LONGEST			val;
+	CORE_ADDR		addr;
+	value_ptr		vptr;
+	union ieee_double	v;
+	struct type *		elttype;
+	struct field *		thisField;
+
+	CHECK_TYPEDEF(type);
+
+	switch ( TYPE_CODE(type) )
+	{
+	case TYPE_CODE_TYPEDEF:
+		aif_val_print_recursive(TYPE_TARGET_TYPE(type), valaddr, address, stream);
+		break;
+
+	case TYPE_CODE_ARRAY:
+		elttype = check_typedef(TYPE_TARGET_TYPE(type));
+
+		if 
+		(
+			TYPE_LENGTH(type) > 0
+			&&
+			TYPE_LENGTH(TYPE_TARGET_TYPE(type)) > 0
+		)
+		{
+			eltlen = TYPE_LENGTH(elttype);
+			len = TYPE_LENGTH(type) / eltlen;
+
+			for ( ix = 0; ix < len; ix++ )
+				aif_val_print_recursive(elttype, valaddr + ix * eltlen, address + ix * eltlen, stream);
+
+			break;
+		}
+
+		/*
+		** Treat as a pointer...
+		*/
+		addr = address;
+		goto asPtr;
+
+	case TYPE_CODE_REF:
+	case TYPE_CODE_PTR:
+		addr = unpack_pointer(type, valaddr);
+
+	asPtr:
+		elttype = check_typedef(TYPE_TARGET_TYPE(type));
+
+		if
+		(
+			TYPE_LENGTH(elttype) == 1
+			&& 
+			TYPE_CODE(elttype) == TYPE_CODE_INT
+		)
+		{
+			/*
+			** call it a string
+			*/
+			(void)aif_emit_string(addr, stream);
+			break;
+		}
+
+		if ( addr == 0 )
+		{
+			emitData((char)AIF_PTR_NIL, stream); 
+			break;
+		}
+
+		for ( ix = 0 ; ix < numValuesSeen; ix++ )
+		{
+			if
+			(
+				valuesSeen[ix].addr == addr
+				&&
+				valuesSeen[ix].used
+			)
+			{
+				if ( valuesSeen[ix].used == 1 )
+				{
+					/* 
+					** first time; just emit as usual
+					*/
+
+					emitData((char)AIF_PTR_NAME, stream); 
+					valuesSeen[ix].used = 2;
+					emitData((char)ix, stream);
+
+					break; /* no need to look at other seen values */
+				}
+
+				/* 
+				** referring to one already emitted
+				*/
+
+				emitData((char)AIF_PTR_REFERENCE, stream); 
+				emitData((char)ix, stream);
+
+				return; /* don't go any deeper */
+			}
+		}
+
+		res = check_value(elttype, addr, &vptr);
+
+		if ( ix == numValuesSeen )
+		{
+			/*
+			** not special at all 
+			*/
+			if ( !res )
+			{
+				emitData((char)AIF_PTR_INVALID, stream); 
+				break;
+			}
+
+			emitData((char)AIF_PTR_NORMAL, stream); 
+		}
+
+		aif_val_print_recursive (VALUE_TYPE(vptr),
+					VALUE_CONTENTS(vptr),
+					VALUE_ADDRESS(vptr),
+					stream);
+
+		break;
+
+	case TYPE_CODE_STRUCT:
+	case TYPE_CODE_UNION:
+		/*
+		** A union is treated just like a struct. That is
+		** we attempt to traverse each field if possible.
+		** It's then up to the receiver to decide what is
+		** sensible information.
+		**
+		** XXX: What happens if a pointer points to random
+		** data?
+		*/
+		for ( ix = 0 ; ix < TYPE_NFIELDS (type) ; ix++ )
+		{
+			if ( TYPE_FIELD_IGNORE(type, ix) )
+				continue;
+
+			if 
+			(
+				!TYPE_FIELD_STATIC(type, ix) 
+				&& 
+				TYPE_FIELD_PACKED(type, ix)
+			)
+			{
+				vptr = value_from_longest(TYPE_FIELD_TYPE(type, ix),
+					unpack_field_as_long(type, valaddr, ix));
+
+				aif_val_print_recursive(TYPE_FIELD_TYPE(type, ix), VALUE_CONTENTS(vptr), 0, stream);
+			}
+			else if ( TYPE_FIELD_STATIC (type, ix) )
+			{
+				vptr = value_static_field (type, ix);
+
+				if ( vptr == NULL )
+					continue;
+
+				/*
+				XXX
+				cp_print_static_field (TYPE_FIELD_TYPE (type, i), v,
+				stream, format, recurse + 1,
+				pretty);
+				*/
+			}
+			else
+				aif_val_print_recursive(TYPE_FIELD_TYPE(type, ix), 
+					valaddr + TYPE_FIELD_BITPOS (type, ix) / 8,
+					address + TYPE_FIELD_BITPOS (type, ix) / 8,
+					stream);
+		}
+		break;
+
+	case TYPE_CODE_CHAR:
+	asChar:
+		val = unpack_long (type, valaddr);
+		emitData((char) (val & 0xff), stream); 
+		break;
+
+	case TYPE_CODE_INT:
+		len = TYPE_LENGTH (type);
+
+		if
+		(
+			len == 1 
+			&&
+			strncmp(TYPE_NAME(type), "char", 5) == 0
+		) 
+			goto asChar;
+
+		val = unpack_long(type, valaddr);
+		AIFNormalise((char *) &v, len, (char *) &val, sizeof(LONGEST));
+		
+		for ( ix = 0 ; ix < len ; ix++ )
+			emitData((char)(v.c[ix] & 0xff), stream); 
+
+		break;
+
+	case TYPE_CODE_FLT:
+		len = TYPE_LENGTH (type);
+
+		switch ( len ) {
+		case 4:
+			v.f = unpack_double (type, valaddr, &valid);
+			break;
+
+		case 8:
+			v.d = unpack_double (type, valaddr, &valid);
+			break;
+
+#ifdef HAVE_LONG_DOUBLE
+		case 16:
+			v.l = unpack_double (type, valaddr, &valid);
+			break;
+#endif /* HAVE_LONG_DOUBLE */
+		default:
+			fprintf(stderr, "cannot handle float of length %d\n", len);
+		}
+
+		for ( ix = 0 ; ix < len ; ix++ )
+			emitData((char) (v.c[ix] & 0xff), stream); 
+
+		break;
+
+	case TYPE_CODE_VOID:
+		break;
+
+	case TYPE_CODE_MEMBER:
+	case TYPE_CODE_ENUM:
+	case TYPE_CODE_RANGE:
+	case TYPE_CODE_FUNC:
+	case TYPE_CODE_METHOD:
+	case TYPE_CODE_UNDEF:
+	case TYPE_CODE_ERROR:
+		break;
+
+	default:
+		error ("Invalid C/C++ type code %d in symbol table.", TYPE_CODE (type));
+	}
+}
+
+void aif_val_print(type, valaddr, embedded_offset, address, stream)
+     struct type *type;
+     char *valaddr;
+     int embedded_offset;
+     CORE_ADDR address;
+     struct ui_file *stream;
+{
+  str_ptr s;
+
+  // struct ui_file *typeStream=mem_fileopen();
+  numValuesSeen = 0;
+  aif_discover(type, valaddr+embedded_offset, doValue); /* values */
+  aif_discover(type, 0, doType); /* types */
+  aif_reduce();
+  dataStreamPos = 0;
+  // fputs_filtered("(", stream);
+  s = gdb_type_to_fds(type);
+  fputs_filtered(str_val(s), stream);
+  str_free(s);
+  // fputs_filtered(")", stream);
+  fputs_filtered(" ", stream);
+  aif_val_print_recursive(type, valaddr+embedded_offset, address, stream);
+  // contents = ui_file_xstrdup(typeStream, &dummy);
+  // fputs_filtered(contents, stream);
+  // free(contents);
+  // ui_file_delete(typeStream);
+  gdb_flush(stream);
+} /* aif_val_print */
+
+void
+aif_type_print(type, stream)
+	struct type *type;
+	struct ui_file *stream;
+{
+	str_ptr	s;
+
+	numValuesSeen = 0;
+	aif_discover(type, 0, doType); /* types */
+	aif_reduce();
+	dataStreamPos = 0;
+	s = gdb_type_to_fds(type);
+	fputs_filtered(str_val(s), stream);
+	str_free(s);
+}
+
+#define STRSIZE 100
+
+str_ptr
+str_init(void)
+{
+	str_ptr	s;
+
+	s = (str_ptr)xmalloc(sizeof(struct str_type));
+	s->buf = (char *)xmalloc(STRSIZE);
+	s->blen = STRSIZE;
+	s->slen = 0;
+	*(s->buf) = '\0';
+
+	return s;
+}
+
+void
+str_add(str_ptr s1, char *s2)
+{
+	int	l2 = strlen(s2);
+
+	if (s1->slen + l2 >= s1->blen)
+	{
+		s1->blen += max(STRSIZE, l2);
+		s1->buf = (char *) xrealloc (s1->buf, s1->blen);
+	}
+
+	memcpy(&(s1->buf[s1->slen]), s2, l2);
+	s1->slen += l2;
+	s1->buf[s1->slen] = '\0';
+}
+
+void
+str_free(str_ptr s)
+{
+	free(s->buf);
+	free(s);
+}
+
+char *
+str_val(str_ptr s)
+{
+	return s->buf;
+}
+
+str_ptr
+str_dup(char *s1)
+{
+	str_ptr s = str_init();
+	str_add(s, s1);
+	return s;
+}
+
+int
+check_value(type, addr, res)
+     struct type *type;
+     CORE_ADDR addr;
+     value_ptr *res;
+{
+  value_ptr val;
+  char buf[sizeof (ULONGEST)];
+
+  if (TYPE_CODE (check_typedef (type)) == TYPE_CODE_VOID)
+  	return 0;
+
+  val = allocate_value (type);
+
+  if (GDB_TARGET_IS_D10V
+      && TYPE_CODE (type) == TYPE_CODE_PTR
+      && TYPE_TARGET_TYPE (type)
+      && (TYPE_CODE (TYPE_TARGET_TYPE (type)) == TYPE_CODE_FUNC))
+    {
+      /* pointer to function */
+      unsigned long num;
+      unsigned short snum;
+
+      if ( target_read_memory(addr, buf, 2) != 0 )
+      	return 0;
+
+      snum = extract_unsigned_integer (buf, 2);
+      num = D10V_MAKE_IADDR (snum);
+      store_address (VALUE_CONTENTS_RAW (val), 4, num);
+    }
+  else if (GDB_TARGET_IS_D10V
+	   && TYPE_CODE (type) == TYPE_CODE_PTR)
+    {
+      /* pointer to data */
+      unsigned long num;
+      unsigned short snum;
+
+      if ( target_read_memory(addr, buf, 2) != 0 )
+      	return 0;
+
+      snum = extract_unsigned_integer (buf, 2);
+      num = D10V_MAKE_DADDR (snum);
+      store_address (VALUE_CONTENTS_RAW (val), 4, num);
+    }
+  else
+    if ( target_read_memory_section (addr, VALUE_CONTENTS_ALL_RAW(val), TYPE_LENGTH(type), NULL) != 0 )
+    	return 0;
+
+  VALUE_LVAL(val) = lval_memory;
+  VALUE_ADDRESS(val) = addr;
+  VALUE_BFD_SECTION(val) = NULL;
+
+  *res = val;
+
+  return 1;
+}
+
--- gdb-5.0-old/gdb/c-valprint.c	Mon Apr  3 22:53:50 2000
+++ gdb-5.0/gdb/c-valprint.c	Fri Jul 19 19:59:44 2002
@@ -30,6 +30,11 @@
 #include "c-lang.h"
 
 
+// raphael:
+extern int max_print_depth; /* set by "set print depth" */
+extern int current_print_depth;
+extern int typeprint; /* set by "set print type" (Boolean) */
+
 /* Print data of type TYPE located at VALADDR (within GDB), which came from
    the inferior at address ADDRESS, onto stdio stream STREAM according to
    FORMAT (a letter or 0 for natural format).  The data at VALADDR is in
@@ -44,8 +49,8 @@
    The PRETTY parameter controls prettyprinting.  */
 
 int
-c_val_print (type, valaddr, embedded_offset, address, stream, format, deref_ref, recurse,
-	     pretty)
+c_val_print (type, valaddr, embedded_offset, address, stream, format,
+  deref_ref, recurse, pretty)
      struct type *type;
      char *valaddr;
      int embedded_offset;
@@ -63,6 +68,13 @@
   LONGEST val;
   CORE_ADDR addr;
 
+  if (typeprint && format != 's')
+    {
+      fputs_filtered("(", stream);
+      type_print (type, "", stream, -1);
+      fputs_filtered(") ", stream);
+    }
+
   CHECK_TYPEDEF (type);
   switch (TYPE_CODE (type))
     {
@@ -140,6 +152,7 @@
 	  break;
 	}
       elttype = check_typedef (TYPE_TARGET_TYPE (type));
+      if (!elttype) elttype = type;
       if (TYPE_CODE (elttype) == TYPE_CODE_METHOD)
 	{
 	  cp_print_class_method (valaddr + embedded_offset, type, stream);
@@ -169,6 +182,34 @@
 	      print_address_numeric (addr, 1, stream);
 	    }
 
+	  if (current_print_depth < max_print_depth
+	      && TYPE_CODE (elttype) != TYPE_CODE_UNDEF
+	      && (TYPE_LENGTH (elttype) != 1
+	         || TYPE_CODE (elttype) != TYPE_CODE_INT)
+	      && format != 's')
+	    { /* print complex objected pointed to recursively */
+	      if (addressprint) fprintf_filtered (stream, " => ");
+	      if (addr == 0)
+		{
+		  fprintf_filtered (stream, "nil");
+		}
+	      else
+		{ /* non nil */
+		  value_ptr deref_val = value_at(elttype, addr, NULL);
+		  current_print_depth += 1;
+		  val_print (VALUE_TYPE (deref_val),
+			    VALUE_CONTENTS (deref_val),
+			    0,
+			    VALUE_ADDRESS (deref_val),
+			    stream,
+			    format,
+			    deref_ref,
+			    recurse,
+			    pretty);
+		  current_print_depth -= 1;
+		}
+	    } /* print recursively */
+
 	  /* For a pointer to char or unsigned char, also print the string
 	     pointed to, unless pointer is null.  */
 	  /* FIXME: need to handle wchar_t here... */
@@ -340,9 +381,6 @@
 	}
       /* FIXME, we should consider, at least for ANSI C language, eliminating
          the distinction made between FUNCs and POINTERs to FUNCs.  */
-      fprintf_filtered (stream, "{");
-      type_print (type, "", stream, -1);
-      fprintf_filtered (stream, "} ");
       /* Try to print what function it points to, and its address.  */
       print_address_demangle (address, stream, demangle);
       break;
@@ -520,9 +558,9 @@
       else
 	{
 	  /* normal case */
-	  fprintf_filtered (stream, "(");
-	  type_print (type, "", stream, -1);
-	  fprintf_filtered (stream, ") ");
+	  // fprintf_filtered (stream, "(");
+	  // type_print (type, "", stream, -1);
+	  // fprintf_filtered (stream, ") ");
 	}
     }
   if (objectprint && (TYPE_CODE (VALUE_TYPE (val)) == TYPE_CODE_CLASS))
--- gdb-5.0-old/gdb/printcmd.c	Thu Apr 20 22:10:46 2000
+++ gdb-5.0/gdb/printcmd.c	Fri Jul 19 19:59:44 2002
@@ -272,6 +272,7 @@
   return val;
 }
 
+extern int current_print_depth; /* from valprint.c */
 /* Print value VAL on stream according to FORMAT, a letter or 0.
    Do not end with a newline.
    0 means print VAL according to its own type.
@@ -323,12 +324,14 @@
 	  || TYPE_CODE (type) == TYPE_CODE_STRING
 	  || TYPE_CODE (type) == TYPE_CODE_STRUCT
 	  || TYPE_CODE (type) == TYPE_CODE_UNION)
-	/* If format is 0, use the 'natural' format for
-	 * that type of value.  If the type is non-scalar,
-	 * we have to use language rules to print it as
-	 * a series of scalars.
-	 */
-	value_print (val, stream, format, Val_pretty_default);
+    	{ /* If format is 0, use the 'natural' format for
+	  * that type of value.  If the type is non-scalar,
+	  * we have to use language rules to print it as
+	  * a series of scalars.
+	  */
+	  current_print_depth = 0;
+	  value_print (val, stream, format, Val_pretty_default);
+	}
       else
 	/* User specified format, so don't look to the
 	 * the type to tell us what to do.
--- gdb-5.0-old/gdb/typeprint.c	Mon Apr  3 22:53:50 2000
+++ gdb-5.0/gdb/typeprint.c	Fri Jul 19 19:59:44 2002
@@ -39,6 +39,9 @@
 extern int objectprint;		/* Controls looking up an object's derived type
 				   using what we find in its vtables.  */
 
+extern int aifprint;	/* print type using AIF */
+extern void aif_type_print PARAMS ((struct type *, struct ui_file *));
+
 extern void _initialize_typeprint PARAMS ((void));
 
 static void
@@ -67,6 +70,12 @@
      struct ui_file *stream;
      int show;
 {
+  if (aifprint)
+    {
+	aif_type_print (type, stream);
+    	return;
+    }
+      
   LA_PRINT_TYPE (type, varstring, stream, show, 0);
 }
 
--- gdb-5.0-old/gdb/valprint.c	Mon Feb  7 21:39:02 2000
+++ gdb-5.0/gdb/valprint.c	Fri Jul 19 19:59:44 2002
@@ -35,9 +35,13 @@
 
 #include <errno.h>
 
+extern int aifprint; /* set by "set print aif" (Boolean) */
+void aif_val_print(struct type *type, char *valaddr, int embedded_offset,
+  CORE_ADDR address, struct ui_file *stream);
+
 /* Prototypes for local functions */
 
-static int partial_memory_read (CORE_ADDR memaddr, char *myaddr,
+int partial_memory_read (CORE_ADDR memaddr, char *myaddr,
 				int len, int *errnoptr);
 
 static void print_hex_chars (struct ui_file *, unsigned char *,
@@ -101,6 +105,16 @@
 /* If nonzero, causes machine addresses to be printed in certain contexts. */
 
 int addressprint;		/* Controls printing of machine addresses */
+
+/* If positive, causes pointers to be followed in printing, to given depth */
+int max_print_depth;
+int current_print_depth = 0; /* reset to 0 at each interrupt */
+
+/* If nonzero, causes types to be printed. */
+int typeprint;
+
+/* If nonzero, causes types to be printed, if at all, in AIF format. */
+int aifprint;
 
 
 /* Print data of type TYPE located at VALADDR (within GDB), which came from
@@ -155,6 +169,11 @@
       return (0);
     }
 
+  if (aifprint)
+    {
+      aif_val_print(type, valaddr, embedded_offset, address, stream);
+      return 0;
+    }
   return (LA_VAL_PRINT (type, valaddr, embedded_offset, address,
 			stream, format, deref_ref, recurse, pretty));
 }
@@ -1160,8 +1179,9 @@
 
 /* FIXME: cagney/1999-10-14: Only used by val_print_string.  Can this
    function be eliminated.  */
+/* It is now used by aif_print_string as well. raphael/2000-02-20 */
 
-static int
+int
 partial_memory_read (CORE_ADDR memaddr, char *myaddr, int len, int *errnoptr)
 {
   int nread;			/* Number of bytes actually read. */
@@ -1353,7 +1373,7 @@
     {
       if (addressprint)
 	{
-	  fputs_filtered (" ", stream);
+	  fputs_filtered (" => ", stream);
 	}
       LA_PRINT_STRING (stream, buffer, (bufptr - buffer) / width, width, force_ellipsis);
     }
@@ -1596,6 +1616,27 @@
 		  &setprintlist),
      &showprintlist);
 
+  add_show_from_set
+    (add_set_cmd ("depth", class_support, var_uinteger,
+    		  (char *) &max_print_depth,
+		  "Set depth of pointer recursion.",
+		  &setprintlist),
+     &showprintlist);
+
+  add_show_from_set
+    (add_set_cmd ("type", class_support, var_boolean,
+    		  (char *) &typeprint,
+		  "Set printing of types.",
+		  &setprintlist),
+     &showprintlist);
+
+  add_show_from_set
+    (add_set_cmd ("aif", class_support, var_boolean,
+    		  (char *) &aifprint,
+		  "Set printing of types to aif format.",
+		  &setprintlist),
+     &showprintlist);
+
   c = add_set_cmd ("input-radix", class_support, var_uinteger,
 		   (char *) &input_radix,
 		   "Set default input radix for entering numbers.",
@@ -1630,5 +1671,8 @@
   prettyprint_arrays = 0;
   unionprint = 1;
   addressprint = 1;
+  max_print_depth = -1;
+  typeprint = 0;
+  aifprint = 0;
   print_max = PRINT_MAX_DEFAULT;
 }
--- /dev/null	Tue Mar 25 17:08:18 2003
+++ gdb-5.0/gdb/libaif.mk	Fri Jul 19 19:59:44 2002
@@ -0,0 +1,9 @@
+INCLUDE_CFLAGS += $(INCLUDE_aif)
+
+CLIBS += $(LIB_aif)
+
+SFILES     += aif-valprint.c
+COMMON_OBS += aif-valprint.o
+
+aif-valprint.o: aif-valprint.c $(defs_h) $(expression_h) $(gdbtypes_h) \
+	language.h $(symtab_h) valprint.h $(value_h)
--- gdb-5.0-old/gdb/configure.in	Wed May 10 18:32:18 2000
+++ gdb-5.0/gdb/configure.in	Fri Jul 19 19:59:44 2002
@@ -29,6 +29,12 @@
 AC_ISC_POSIX
 AM_PROG_CC_STDC
 
+AC_TEST_PACKAGE_NEW(aif,[#include <aif.h>],-laif,,/usr/local,AIF)
+if test "$with_aif" = "no"; then
+	AC_MSG_ERROR([You must have libaif to compile this version of GDB.])
+fi
+AC_DEFINE(AIF, 1, [Enable AIF support in in GDB.])dnl
+
 AC_CONFIG_AUX_DIR(`cd $srcdir;pwd`/..)
 AC_CANONICAL_SYSTEM
 
--- gdb-5.0-old/gdb/aclocal.m4	Wed Apr 12 23:29:42 2000
+++ gdb-5.0/gdb/aclocal.m4	Wed Jun 19 15:12:12 2002
@@ -1,3 +1,114 @@
+dnl AC_TEST_PACKAGE_NEW(package,headers,libraries,extra libs,default locations, conditional)
+
+AC_DEFUN(AC_TEST_PACKAGE,[MY_TEST_PACKAGE_NEW($1,[#include <$2>],$4,,$5)])
+
+AC_DEFUN(AC_TEST_PACKAGE_NEW,[
+AC_ARG_WITH($1,
+[  --with-$1=dir                use $1 in dir])
+AC_ARG_WITH($1-lib,
+[  --with-$1-lib=dir            use $1 libraries in dir],
+[if test "$withval" = "yes" -o "$withval" = "no"; then
+  AC_MSG_ERROR([No argument for --with-$1-lib])
+elif test "X$with_$1" = "X"; then
+  with_$1=yes
+fi])
+AC_ARG_WITH($1-include,
+[  --with-$1-include=dir        use $1 headers in dir],
+[if test "$withval" = "yes" -o "$withval" = "no"; then
+  AC_MSG_ERROR([No argument for --with-$1-include])
+elif test "X$with_$1" = "X"; then
+  with_$1=yes
+fi])
+
+AC_MSG_CHECKING(for $1)
+
+case "$with_$1" in
+yes)	;;
+no)	;;
+"")	;;
+*)	if test "$with_$1_include" = ""; then
+		with_$1_include="$with_$1/include"
+	fi
+	if test "$with_$1_lib" = ""; then
+		with_$1_lib="$with_$1/lib$abilibdirext"
+	fi
+	;;
+esac
+header_dirs=
+lib_dirs=
+d='$5'
+for i in $d /usr; do
+	header_dirs="$header_dirs $i/include"
+	lib_dirs="$lib_dirs $i/lib$abilibdirext"
+done
+
+case "$with_$1_include" in
+yes) ;;
+no)  ;;
+*)   header_dirs="$with_$1_include $header_dirs";;
+esac
+case "$with_$1_lib" in
+yes) ;;
+no)  ;;
+*)   lib_dirs="$with_$1_lib $lib_dirs";;
+esac
+
+save_CFLAGS="$CFLAGS"
+save_LIBS="$LIBS"
+ires= lres=
+for i in $header_dirs; do
+	CFLAGS="-I$i $save_CFLAGS"
+	AC_TRY_COMPILE([$2],,ires=$i;break)
+done
+for i in $lib_dirs; do
+	LIBS="-L$i $3 $4 $save_LIBS"
+	AC_TRY_LINK([$2],,lres=$i;break)
+done
+CFLAGS="$save_CFLAGS"
+LIBS="$save_LIBS"
+
+if test "$ires" -a "$lres" -a "$with_$1" != "no"; then
+	$1_includedir="$ires"
+	$1_libdir="$lres"
+	DIR_$1=
+	INCLUDE_$1="-I$$1_includedir"
+	LIB_$1="-L$$1_libdir $3"
+	dnl m4_ifval([$6],
+		AC_DEFINE_UNQUOTED($6,1,[Define if you have the $1 package.])
+	dnl	,
+	dnl 	AC_DEFINE_UNQUOTED(upcase($1),1,[Define if you have the $1 package.]))
+	with_$1=yes
+	AC_MSG_RESULT([headers $ires, libraries $lres])
+else
+	DIR_$1="$1"
+	INCLUDE_$1=
+	LIB_$1=
+	with_$1=no
+	AC_MSG_RESULT($with_$1)
+fi
+dnl m4_ifval([$6],
+dnl 	AM_CONDITIONAL($6, test "$with_$1" = yes)
+dnl 	AM_CONDITIONAL(upcase($1), test "$with_$1" = yes))
+AC_SUBST(DIR_$1)
+AC_SUBST(INCLUDE_$1)
+AC_SUBST(LIB_$1)
+])
+
+# Define a conditional.
+
+AC_DEFUN(AM_CONDITIONAL,
+[AC_SUBST($1_TRUE)
+AC_SUBST($1_FALSE)
+if $2; then
+  $1_TRUE=
+  $1_FALSE='#'
+else
+  $1_TRUE='#'
+  $1_FALSE=
+fi])
+
+dnl ===========================================================================
+
 dnl aclocal.m4 generated automatically by aclocal 1.4
 
 dnl Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
--- gdb-5.0-old/gdb/configure	Wed May 10 18:32:18 2000
+++ gdb-5.0/gdb/configure	Fri Jul 19 19:59:55 2002
@@ -1,5 +1,68 @@
 #! /bin/sh
 
+
+
+
+# serial 1
+
+# @defmac AC_PROG_CC_STDC
+# @maindex PROG_CC_STDC
+# @ovindex CC
+# If the C compiler in not in ANSI C mode by default, try to add an option
+# to output variable @code{CC} to make it so.  This macro tries various
+# options that select ANSI C on some system or another.  It considers the
+# compiler to be in ANSI C mode if it handles function prototypes correctly.
+#
+# If you use this macro, you should check after calling it whether the C
+# compiler has been set to accept ANSI C; if not, the shell variable
+# @code{am_cv_prog_cc_stdc} is set to @samp{no}.  If you wrote your source
+# code in ANSI C, you can make an un-ANSIfied copy of it by using the
+# program @code{ansi2knr}, which comes with Ghostscript.
+# @end defmac
+
+
+
+# This file is derived from `gettext.m4'.  The difference is that the
+# included macros assume Cygnus-style source and build trees.
+
+# Macro to add for using GNU gettext.
+# Ulrich Drepper <drepper@cygnus.com>, 1995.
+#
+# This file file be copied and used freely without restrictions.  It can
+# be used in projects which are not available under the GNU Public License
+# but which still want to provide support for the GNU gettext functionality.
+# Please note that the actual code is *not* freely available.
+
+# serial 3
+
+
+
+
+
+# Search path for a program which passes the given test.
+# Ulrich Drepper <drepper@cygnus.com>, 1996.
+#
+# This file file be copied and used freely without restrictions.  It can
+# be used in projects which are not available under the GNU Public License
+# but which still want to provide support for the GNU gettext functionality.
+# Please note that the actual code is *not* freely available.
+
+# serial 1
+
+
+
+# Check whether LC_MESSAGES is available in <locale.h>.
+# Ulrich Drepper <drepper@cygnus.com>, 1995.
+#
+# This file file be copied and used freely without restrictions.  It can
+# be used in projects which are not available under the GNU Public License
+# but which still want to provide support for the GNU gettext functionality.
+# Please note that the actual code is *not* freely available.
+
+# serial 1
+
+
+
 # Guess values for system-dependent variables and create Makefiles.
 # Generated automatically using autoconf version 2.13 
 # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
@@ -15,6 +78,12 @@
   --enable-maintainer-mode enable make rules and dependencies not useful
                           (and sometimes confusing) to the casual installer"
 ac_help="$ac_help
+  --with-aif=dir                use aif in dir"
+ac_help="$ac_help
+  --with-aif-lib=dir            use aif libraries in dir"
+ac_help="$ac_help
+  --with-aif-include=dir        use aif headers in dir"
+ac_help="$ac_help
   --disable-nls           do not use Native Language Support"
 ac_help="$ac_help
   --with-included-gettext use the GNU gettext library included here"
@@ -73,7 +142,6 @@
 program_transform_name=s,x,x,
 silent=
 site=
-sitefile=
 srcdir=
 target=NONE
 verbose=
@@ -188,7 +256,6 @@
   --help                  print this message
   --no-create             do not create output files
   --quiet, --silent       do not print \`checking...' messages
-  --site-file=FILE        use FILE as the site file
   --version               print the version of autoconf that created configure
 Directory and file names:
   --prefix=PREFIX         install architecture-independent files in PREFIX
@@ -359,11 +426,6 @@
   -site=* | --site=* | --sit=*)
     site="$ac_optarg" ;;
 
-  -site-file | --site-file | --site-fil | --site-fi | --site-f)
-    ac_prev=sitefile ;;
-  -site-file=* | --site-file=* | --site-fil=* | --site-fi=* | --site-f=*)
-    sitefile="$ac_optarg" ;;
-
   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
     ac_prev=srcdir ;;
   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
@@ -529,16 +591,12 @@
 srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`
 
 # Prefer explicitly selected file to automatically selected ones.
-if test -z "$sitefile"; then
-  if test -z "$CONFIG_SITE"; then
-    if test "x$prefix" != xNONE; then
-      CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
-    else
-      CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
-    fi
+if test -z "$CONFIG_SITE"; then
+  if test "x$prefix" != xNONE; then
+    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
+  else
+    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
   fi
-else
-  CONFIG_SITE="$sitefile"
 fi
 for ac_site_file in $CONFIG_SITE; do
   if test -r "$ac_site_file"; then
@@ -579,7 +637,7 @@
 
 
 echo $ac_n "checking whether to enable maintainer-specific portions of Makefiles""... $ac_c" 1>&6
-echo "configure:583: checking whether to enable maintainer-specific portions of Makefiles" >&5
+echo "configure:641: checking whether to enable maintainer-specific portions of Makefiles" >&5
     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.
 if test "${enable_maintainer_mode+set}" = set; then
   enableval="$enable_maintainer_mode"
@@ -605,7 +663,7 @@
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:609: checking for $ac_word" >&5
+echo "configure:667: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -635,7 +693,7 @@
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:639: checking for $ac_word" >&5
+echo "configure:697: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -686,7 +744,7 @@
       # Extract the first word of "cl", so it can be a program name with args.
 set dummy cl; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:690: checking for $ac_word" >&5
+echo "configure:748: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -718,7 +776,7 @@
 fi
 
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:722: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
+echo "configure:780: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -729,12 +787,12 @@
 
 cat > conftest.$ac_ext << EOF
 
-#line 733 "configure"
+#line 791 "configure"
 #include "confdefs.h"
 
 main(){return(0);}
 EOF
-if { (eval echo configure:738: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:796: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cc_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -760,12 +818,12 @@
   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:764: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:822: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
 cross_compiling=$ac_cv_prog_cc_cross
 
 echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:769: checking whether we are using GNU C" >&5
+echo "configure:827: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -774,7 +832,7 @@
   yes;
 #endif
 EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:778: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:836: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gcc=yes
 else
   ac_cv_prog_gcc=no
@@ -793,7 +851,7 @@
 ac_save_CFLAGS="$CFLAGS"
 CFLAGS=
 echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:797: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:855: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -825,7 +883,7 @@
 fi
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:829: checking how to run the C preprocessor" >&5
+echo "configure:887: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
@@ -840,13 +898,13 @@
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 844 "configure"
+#line 902 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:850: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:908: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -857,13 +915,13 @@
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 861 "configure"
+#line 919 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:867: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:925: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -874,13 +932,13 @@
   rm -rf conftest*
   CPP="${CC-cc} -nologo -E"
   cat > conftest.$ac_ext <<EOF
-#line 878 "configure"
+#line 936 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:884: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:942: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -905,9 +963,9 @@
 echo "$ac_t""$CPP" 1>&6
 
 echo $ac_n "checking for AIX""... $ac_c" 1>&6
-echo "configure:909: checking for AIX" >&5
+echo "configure:967: checking for AIX" >&5
 cat > conftest.$ac_ext <<EOF
-#line 911 "configure"
+#line 969 "configure"
 #include "confdefs.h"
 #ifdef _AIX
   yes
@@ -929,7 +987,7 @@
 
 
 echo $ac_n "checking for POSIXized ISC""... $ac_c" 1>&6
-echo "configure:933: checking for POSIXized ISC" >&5
+echo "configure:991: checking for POSIXized ISC" >&5
 if test -d /etc/conf/kconfig.d &&
   grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1
 then
@@ -953,7 +1011,7 @@
 
 
 echo $ac_n "checking for ${CC-cc} option to accept ANSI C""... $ac_c" 1>&6
-echo "configure:957: checking for ${CC-cc} option to accept ANSI C" >&5
+echo "configure:1015: checking for ${CC-cc} option to accept ANSI C" >&5
 if eval "test \"`echo '$''{'am_cv_prog_cc_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -969,7 +1027,7 @@
 do
   CC="$ac_save_CC $ac_arg"
   cat > conftest.$ac_ext <<EOF
-#line 973 "configure"
+#line 1031 "configure"
 #include "confdefs.h"
 #include <stdarg.h>
 #include <stdio.h>
@@ -1006,7 +1064,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:1010: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1068: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   am_cv_prog_cc_stdc="$ac_arg"; break
 else
@@ -1030,6 +1088,142 @@
 esac
 
 
+
+# Check whether --with-aif or --without-aif was given.
+if test "${with_aif+set}" = set; then
+  withval="$with_aif"
+  :
+fi
+
+# Check whether --with-aif-lib or --without-aif-lib was given.
+if test "${with_aif_lib+set}" = set; then
+  withval="$with_aif_lib"
+  if test "$withval" = "yes" -o "$withval" = "no"; then
+  { echo "configure: error: No argument for --with-aif-lib" 1>&2; exit 1; }
+elif test "X$with_aif" = "X"; then
+  with_aif=yes
+fi
+fi
+
+# Check whether --with-aif-include or --without-aif-include was given.
+if test "${with_aif_include+set}" = set; then
+  withval="$with_aif_include"
+  if test "$withval" = "yes" -o "$withval" = "no"; then
+  { echo "configure: error: No argument for --with-aif-include" 1>&2; exit 1; }
+elif test "X$with_aif" = "X"; then
+  with_aif=yes
+fi
+fi
+
+
+echo $ac_n "checking for aif""... $ac_c" 1>&6
+echo "configure:1121: checking for aif" >&5
+
+case "$with_aif" in
+yes)	;;
+no)	;;
+"")	;;
+*)	if test "$with_aif_include" = ""; then
+		with_aif_include="$with_aif/include"
+	fi
+	if test "$with_aif_lib" = ""; then
+		with_aif_lib="$with_aif/lib$abilibdirext"
+	fi
+	;;
+esac
+header_dirs=
+lib_dirs=
+d='/usr/local'
+for i in $d /usr; do
+	header_dirs="$header_dirs $i/include"
+	lib_dirs="$lib_dirs $i/lib$abilibdirext"
+done
+
+case "$with_aif_include" in
+yes) ;;
+no)  ;;
+*)   header_dirs="$with_aif_include $header_dirs";;
+esac
+case "$with_aif_lib" in
+yes) ;;
+no)  ;;
+*)   lib_dirs="$with_aif_lib $lib_dirs";;
+esac
+
+save_CFLAGS="$CFLAGS"
+save_LIBS="$LIBS"
+ires= lres=
+for i in $header_dirs; do
+	CFLAGS="-I$i $save_CFLAGS"
+	cat > conftest.$ac_ext <<EOF
+#line 1160 "configure"
+#include "confdefs.h"
+#include <aif.h>
+int main() {
+
+; return 0; }
+EOF
+if { (eval echo configure:1167: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ires=$i;break
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+fi
+rm -f conftest*
+done
+for i in $lib_dirs; do
+	LIBS="-L$i -laif  $save_LIBS"
+	cat > conftest.$ac_ext <<EOF
+#line 1179 "configure"
+#include "confdefs.h"
+#include <aif.h>
+int main() {
+
+; return 0; }
+EOF
+if { (eval echo configure:1186: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  lres=$i;break
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+fi
+rm -f conftest*
+done
+CFLAGS="$save_CFLAGS"
+LIBS="$save_LIBS"
+
+if test "$ires" -a "$lres" -a "$with_aif" != "no"; then
+	aif_includedir="$ires"
+	aif_libdir="$lres"
+	DIR_aif=
+	INCLUDE_aif="-I$aif_includedir"
+	LIB_aif="-L$aif_libdir -laif"
+			cat >> confdefs.h <<EOF
+#define AIF 1
+EOF
+
+			with_aif=yes
+	echo "$ac_t""headers $ires, libraries $lres" 1>&6
+else
+	DIR_aif="aif"
+	INCLUDE_aif=
+	LIB_aif=
+	with_aif=no
+	echo "$ac_t""$with_aif" 1>&6
+fi
+
+
+
+
+if test "$with_aif" = "no"; then
+	{ echo "configure: error: You must have libaif to compile this version of GDB." 1>&2; exit 1; }
+fi
+cat >> confdefs.h <<\EOF
+#define AIF 1
+EOF
+
 ac_aux_dir=
 for ac_dir in `cd $srcdir;pwd`/.. $srcdir/`cd $srcdir;pwd`/..; do
   if test -f $ac_dir/install-sh; then
@@ -1077,7 +1271,7 @@
 fi
 
 echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:1081: checking host system type" >&5
+echo "configure:1275: checking host system type" >&5
 
 host_alias=$host
 case "$host_alias" in
@@ -1098,7 +1292,7 @@
 echo "$ac_t""$host" 1>&6
 
 echo $ac_n "checking target system type""... $ac_c" 1>&6
-echo "configure:1102: checking target system type" >&5
+echo "configure:1296: checking target system type" >&5
 
 target_alias=$target
 case "$target_alias" in
@@ -1116,7 +1310,7 @@
 echo "$ac_t""$target" 1>&6
 
 echo $ac_n "checking build system type""... $ac_c" 1>&6
-echo "configure:1120: checking build system type" >&5
+echo "configure:1314: checking build system type" >&5
 
 build_alias=$build
 case "$build_alias" in
@@ -1141,7 +1335,7 @@
 
 ALL_LINGUAS=
 echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
-echo "configure:1145: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo "configure:1339: checking whether ${MAKE-make} sets \${MAKE}" >&5
 set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1170,7 +1364,7 @@
 # Extract the first word of "ranlib", so it can be a program name with args.
 set dummy ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1174: checking for $ac_word" >&5
+echo "configure:1368: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1198,12 +1392,12 @@
 fi
 
 echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:1202: checking for ANSI C header files" >&5
+echo "configure:1396: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1207 "configure"
+#line 1401 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
@@ -1211,7 +1405,7 @@
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1215: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1409: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1228,7 +1422,7 @@
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 1232 "configure"
+#line 1426 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
@@ -1246,7 +1440,7 @@
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 1250 "configure"
+#line 1444 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
@@ -1267,7 +1461,7 @@
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 1271 "configure"
+#line 1465 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
@@ -1278,7 +1472,7 @@
 exit (0); }
 
 EOF
-if { (eval echo configure:1282: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:1476: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -1302,12 +1496,12 @@
 fi
 
 echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:1306: checking for working const" >&5
+echo "configure:1500: checking for working const" >&5
 if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1311 "configure"
+#line 1505 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -1356,7 +1550,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:1360: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1554: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_const=yes
 else
@@ -1377,21 +1571,21 @@
 fi
 
 echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:1381: checking for inline" >&5
+echo "configure:1575: checking for inline" >&5
 if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_cv_c_inline=no
 for ac_kw in inline __inline__ __inline; do
   cat > conftest.$ac_ext <<EOF
-#line 1388 "configure"
+#line 1582 "configure"
 #include "confdefs.h"
 
 int main() {
 } $ac_kw foo() {
 ; return 0; }
 EOF
-if { (eval echo configure:1395: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1589: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_inline=$ac_kw; break
 else
@@ -1417,12 +1611,12 @@
 esac
 
 echo $ac_n "checking for off_t""... $ac_c" 1>&6
-echo "configure:1421: checking for off_t" >&5
+echo "configure:1615: checking for off_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1426 "configure"
+#line 1620 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -1450,12 +1644,12 @@
 fi
 
 echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:1454: checking for size_t" >&5
+echo "configure:1648: checking for size_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1459 "configure"
+#line 1653 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -1485,19 +1679,19 @@
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
 echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:1489: checking for working alloca.h" >&5
+echo "configure:1683: checking for working alloca.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1494 "configure"
+#line 1688 "configure"
 #include "confdefs.h"
 #include <alloca.h>
 int main() {
 char *p = alloca(2 * sizeof(int));
 ; return 0; }
 EOF
-if { (eval echo configure:1501: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1695: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_header_alloca_h=yes
 else
@@ -1518,12 +1712,12 @@
 fi
 
 echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:1522: checking for alloca" >&5
+echo "configure:1716: checking for alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1527 "configure"
+#line 1721 "configure"
 #include "confdefs.h"
 
 #ifdef __GNUC__
@@ -1551,7 +1745,7 @@
 char *p = (char *) alloca(1);
 ; return 0; }
 EOF
-if { (eval echo configure:1555: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1749: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_alloca_works=yes
 else
@@ -1583,12 +1777,12 @@
 
 
 echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:1587: checking whether alloca needs Cray hooks" >&5
+echo "configure:1781: checking whether alloca needs Cray hooks" >&5
 if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1592 "configure"
+#line 1786 "configure"
 #include "confdefs.h"
 #if defined(CRAY) && ! defined(CRAY2)
 webecray
@@ -1613,12 +1807,12 @@
 if test $ac_cv_os_cray = yes; then
 for ac_func in _getb67 GETB67 getb67; do
   echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:1617: checking for $ac_func" >&5
+echo "configure:1811: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1622 "configure"
+#line 1816 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -1641,7 +1835,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:1645: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1839: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -1668,7 +1862,7 @@
 fi
 
 echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:1672: checking stack direction for C alloca" >&5
+echo "configure:1866: checking stack direction for C alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1676,7 +1870,7 @@
   ac_cv_c_stack_direction=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 1680 "configure"
+#line 1874 "configure"
 #include "confdefs.h"
 find_stack_direction ()
 {
@@ -1695,7 +1889,7 @@
   exit (find_stack_direction() < 0);
 }
 EOF
-if { (eval echo configure:1699: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:1893: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_stack_direction=1
 else
@@ -1720,17 +1914,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:1724: checking for $ac_hdr" >&5
+echo "configure:1918: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1729 "configure"
+#line 1923 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1734: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1928: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1759,12 +1953,12 @@
 for ac_func in getpagesize
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:1763: checking for $ac_func" >&5
+echo "configure:1957: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1768 "configure"
+#line 1962 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -1787,7 +1981,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:1791: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1985: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -1812,7 +2006,7 @@
 done
 
 echo $ac_n "checking for working mmap""... $ac_c" 1>&6
-echo "configure:1816: checking for working mmap" >&5
+echo "configure:2010: checking for working mmap" >&5
 if eval "test \"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1820,7 +2014,7 @@
   ac_cv_func_mmap_fixed_mapped=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 1824 "configure"
+#line 2018 "configure"
 #include "confdefs.h"
 
 /* Thanks to Mike Haertel and Jim Avera for this test.
@@ -1960,7 +2154,7 @@
 }
 
 EOF
-if { (eval echo configure:1964: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:2158: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_mmap_fixed_mapped=yes
 else
@@ -1988,17 +2182,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:1992: checking for $ac_hdr" >&5
+echo "configure:2186: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1997 "configure"
+#line 2191 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2002: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2196: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -2028,12 +2222,12 @@
 __argz_count __argz_stringify __argz_next
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:2032: checking for $ac_func" >&5
+echo "configure:2226: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2037 "configure"
+#line 2231 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -2056,7 +2250,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2060: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2254: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -2085,12 +2279,12 @@
      for ac_func in stpcpy
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:2089: checking for $ac_func" >&5
+echo "configure:2283: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2094 "configure"
+#line 2288 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -2113,7 +2307,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2117: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2311: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -2147,19 +2341,19 @@
 
    if test $ac_cv_header_locale_h = yes; then
     echo $ac_n "checking for LC_MESSAGES""... $ac_c" 1>&6
-echo "configure:2151: checking for LC_MESSAGES" >&5
+echo "configure:2345: checking for LC_MESSAGES" >&5
 if eval "test \"`echo '$''{'am_cv_val_LC_MESSAGES'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2156 "configure"
+#line 2350 "configure"
 #include "confdefs.h"
 #include <locale.h>
 int main() {
 return LC_MESSAGES
 ; return 0; }
 EOF
-if { (eval echo configure:2163: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2357: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   am_cv_val_LC_MESSAGES=yes
 else
@@ -2180,7 +2374,7 @@
     fi
   fi
    echo $ac_n "checking whether NLS is requested""... $ac_c" 1>&6
-echo "configure:2184: checking whether NLS is requested" >&5
+echo "configure:2378: checking whether NLS is requested" >&5
         # Check whether --enable-nls or --disable-nls was given.
 if test "${enable_nls+set}" = set; then
   enableval="$enable_nls"
@@ -2200,7 +2394,7 @@
 EOF
 
       echo $ac_n "checking whether included gettext is requested""... $ac_c" 1>&6
-echo "configure:2204: checking whether included gettext is requested" >&5
+echo "configure:2398: checking whether included gettext is requested" >&5
       # Check whether --with-included-gettext or --without-included-gettext was given.
 if test "${with_included_gettext+set}" = set; then
   withval="$with_included_gettext"
@@ -2219,17 +2413,17 @@
 
 	ac_safe=`echo "libintl.h" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for libintl.h""... $ac_c" 1>&6
-echo "configure:2223: checking for libintl.h" >&5
+echo "configure:2417: checking for libintl.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2228 "configure"
+#line 2422 "configure"
 #include "confdefs.h"
 #include <libintl.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2233: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2427: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -2246,19 +2440,19 @@
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   echo $ac_n "checking for gettext in libc""... $ac_c" 1>&6
-echo "configure:2250: checking for gettext in libc" >&5
+echo "configure:2444: checking for gettext in libc" >&5
 if eval "test \"`echo '$''{'gt_cv_func_gettext_libc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2255 "configure"
+#line 2449 "configure"
 #include "confdefs.h"
 #include <libintl.h>
 int main() {
 return (int) gettext ("")
 ; return 0; }
 EOF
-if { (eval echo configure:2262: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2456: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   gt_cv_func_gettext_libc=yes
 else
@@ -2274,7 +2468,7 @@
 
 	   if test "$gt_cv_func_gettext_libc" != "yes"; then
 	     echo $ac_n "checking for bindtextdomain in -lintl""... $ac_c" 1>&6
-echo "configure:2278: checking for bindtextdomain in -lintl" >&5
+echo "configure:2472: checking for bindtextdomain in -lintl" >&5
 ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2282,7 +2476,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lintl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2286 "configure"
+#line 2480 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2293,7 +2487,7 @@
 bindtextdomain()
 ; return 0; }
 EOF
-if { (eval echo configure:2297: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2491: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2309,19 +2503,19 @@
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   echo $ac_n "checking for gettext in libintl""... $ac_c" 1>&6
-echo "configure:2313: checking for gettext in libintl" >&5
+echo "configure:2507: checking for gettext in libintl" >&5
 if eval "test \"`echo '$''{'gt_cv_func_gettext_libintl'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2318 "configure"
+#line 2512 "configure"
 #include "confdefs.h"
 
 int main() {
 return (int) gettext ("")
 ; return 0; }
 EOF
-if { (eval echo configure:2325: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2519: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   gt_cv_func_gettext_libintl=yes
 else
@@ -2349,7 +2543,7 @@
 	      # Extract the first word of "msgfmt", so it can be a program name with args.
 set dummy msgfmt; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2353: checking for $ac_word" >&5
+echo "configure:2547: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2383,12 +2577,12 @@
 		for ac_func in dcgettext
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:2387: checking for $ac_func" >&5
+echo "configure:2581: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2392 "configure"
+#line 2586 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -2411,7 +2605,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:2415: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2609: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -2438,7 +2632,7 @@
 		# Extract the first word of "gmsgfmt", so it can be a program name with args.
 set dummy gmsgfmt; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2442: checking for $ac_word" >&5
+echo "configure:2636: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2474,7 +2668,7 @@
 		# Extract the first word of "xgettext", so it can be a program name with args.
 set dummy xgettext; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2478: checking for $ac_word" >&5
+echo "configure:2672: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2506,7 +2700,7 @@
 fi
 
 		cat > conftest.$ac_ext <<EOF
-#line 2510 "configure"
+#line 2704 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -2514,7 +2708,7 @@
 			       return _nl_msg_cat_cntr
 ; return 0; }
 EOF
-if { (eval echo configure:2518: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2712: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   CATOBJEXT=.gmo
 		   DATADIRNAME=share
@@ -2546,7 +2740,7 @@
         # Extract the first word of "msgfmt", so it can be a program name with args.
 set dummy msgfmt; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2550: checking for $ac_word" >&5
+echo "configure:2744: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2580,7 +2774,7 @@
         # Extract the first word of "gmsgfmt", so it can be a program name with args.
 set dummy gmsgfmt; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2584: checking for $ac_word" >&5
+echo "configure:2778: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2616,7 +2810,7 @@
         # Extract the first word of "xgettext", so it can be a program name with args.
 set dummy xgettext; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2620: checking for $ac_word" >&5
+echo "configure:2814: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2706,7 +2900,7 @@
        LINGUAS=
      else
        echo $ac_n "checking for catalogs to be installed""... $ac_c" 1>&6
-echo "configure:2710: checking for catalogs to be installed" >&5
+echo "configure:2904: checking for catalogs to be installed" >&5
        NEW_LINGUAS=
        for lang in ${LINGUAS=$ALL_LINGUAS}; do
          case "$ALL_LINGUAS" in
@@ -2734,17 +2928,17 @@
       if test "$CATOBJEXT" = ".cat"; then
 	 ac_safe=`echo "linux/version.h" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for linux/version.h""... $ac_c" 1>&6
-echo "configure:2738: checking for linux/version.h" >&5
+echo "configure:2932: checking for linux/version.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2743 "configure"
+#line 2937 "configure"
 #include "confdefs.h"
 #include <linux/version.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2748: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2942: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -2846,7 +3040,7 @@
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2850: checking for $ac_word" >&5
+echo "configure:3044: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2887,7 +3081,7 @@
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
 echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:2891: checking for a BSD compatible install" >&5
+echo "configure:3085: checking for a BSD compatible install" >&5
 if test -z "$INSTALL"; then
 if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2948,7 +3142,7 @@
 # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ar; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2952: checking for $ac_word" >&5
+echo "configure:3146: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2980,7 +3174,7 @@
 # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2984: checking for $ac_word" >&5
+echo "configure:3178: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3012,7 +3206,7 @@
   # Extract the first word of "ranlib", so it can be a program name with args.
 set dummy ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3016: checking for $ac_word" >&5
+echo "configure:3210: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3049,7 +3243,7 @@
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3053: checking for $ac_word" >&5
+echo "configure:3247: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_YACC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3083,7 +3277,7 @@
 # Extract the first word of "${ac_tool_prefix}mig", so it can be a program name with args.
 set dummy ${ac_tool_prefix}mig; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3087: checking for $ac_word" >&5
+echo "configure:3281: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_MIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3134,12 +3328,12 @@
 
 
 echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
-echo "configure:3138: checking return type of signal handlers" >&5
+echo "configure:3332: checking return type of signal handlers" >&5
 if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3143 "configure"
+#line 3337 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
@@ -3156,7 +3350,7 @@
 int i;
 ; return 0; }
 EOF
-if { (eval echo configure:3160: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3354: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_type_signal=void
 else
@@ -3176,12 +3370,12 @@
 
 
 echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:3180: checking for ANSI C header files" >&5
+echo "configure:3374: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3185 "configure"
+#line 3379 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
@@ -3189,7 +3383,7 @@
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3193: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3387: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -3206,7 +3400,7 @@
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 3210 "configure"
+#line 3404 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
@@ -3224,7 +3418,7 @@
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 3228 "configure"
+#line 3422 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
@@ -3245,7 +3439,7 @@
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 3249 "configure"
+#line 3443 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
@@ -3256,7 +3450,7 @@
 exit (0); }
 
 EOF
-if { (eval echo configure:3260: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3454: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -3297,17 +3491,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3301: checking for $ac_hdr" >&5
+echo "configure:3495: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3306 "configure"
+#line 3500 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3311: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3505: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -3334,12 +3528,12 @@
 done
 
 echo $ac_n "checking whether stat file-mode macros are broken""... $ac_c" 1>&6
-echo "configure:3338: checking whether stat file-mode macros are broken" >&5
+echo "configure:3532: checking whether stat file-mode macros are broken" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stat_broken'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3343 "configure"
+#line 3537 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -3391,12 +3585,12 @@
 
 
 echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:3395: checking for working const" >&5
+echo "configure:3589: checking for working const" >&5
 if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3400 "configure"
+#line 3594 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -3445,7 +3639,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3449: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3643: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_const=yes
 else
@@ -3469,12 +3663,12 @@
 for ac_func in setpgid sbrk sigaction isascii bzero bcopy btowc poll sigprocmask
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3473: checking for $ac_func" >&5
+echo "configure:3667: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3478 "configure"
+#line 3672 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -3497,7 +3691,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3501: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3695: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -3524,19 +3718,19 @@
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
 echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:3528: checking for working alloca.h" >&5
+echo "configure:3722: checking for working alloca.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3533 "configure"
+#line 3727 "configure"
 #include "confdefs.h"
 #include <alloca.h>
 int main() {
 char *p = alloca(2 * sizeof(int));
 ; return 0; }
 EOF
-if { (eval echo configure:3540: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3734: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_header_alloca_h=yes
 else
@@ -3557,12 +3751,12 @@
 fi
 
 echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:3561: checking for alloca" >&5
+echo "configure:3755: checking for alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3566 "configure"
+#line 3760 "configure"
 #include "confdefs.h"
 
 #ifdef __GNUC__
@@ -3590,7 +3784,7 @@
 char *p = (char *) alloca(1);
 ; return 0; }
 EOF
-if { (eval echo configure:3594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3788: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_alloca_works=yes
 else
@@ -3622,12 +3816,12 @@
 
 
 echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:3626: checking whether alloca needs Cray hooks" >&5
+echo "configure:3820: checking whether alloca needs Cray hooks" >&5
 if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3631 "configure"
+#line 3825 "configure"
 #include "confdefs.h"
 #if defined(CRAY) && ! defined(CRAY2)
 webecray
@@ -3652,12 +3846,12 @@
 if test $ac_cv_os_cray = yes; then
 for ac_func in _getb67 GETB67 getb67; do
   echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3656: checking for $ac_func" >&5
+echo "configure:3850: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3661 "configure"
+#line 3855 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -3680,7 +3874,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3878: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -3707,7 +3901,7 @@
 fi
 
 echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:3711: checking stack direction for C alloca" >&5
+echo "configure:3905: checking stack direction for C alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3715,7 +3909,7 @@
   ac_cv_c_stack_direction=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 3719 "configure"
+#line 3913 "configure"
 #include "confdefs.h"
 find_stack_direction ()
 {
@@ -3734,7 +3928,7 @@
   exit (find_stack_direction() < 0);
 }
 EOF
-if { (eval echo configure:3738: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_stack_direction=1
 else
@@ -3757,19 +3951,19 @@
 
 
 echo $ac_n "checking for PTRACE_GETREGS""... $ac_c" 1>&6
-echo "configure:3761: checking for PTRACE_GETREGS" >&5
+echo "configure:3955: checking for PTRACE_GETREGS" >&5
 if eval "test \"`echo '$''{'gdb_cv_have_ptrace_getregs'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3766 "configure"
+#line 3960 "configure"
 #include "confdefs.h"
 #include <sys/ptrace.h>
 int main() {
 PTRACE_GETREGS;
 ; return 0; }
 EOF
-if { (eval echo configure:3773: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3967: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   gdb_cv_have_ptrace_getregs=yes
 else
@@ -3790,19 +3984,19 @@
 fi
 
 echo $ac_n "checking for PTRACE_GETXFPREGS""... $ac_c" 1>&6
-echo "configure:3794: checking for PTRACE_GETXFPREGS" >&5
+echo "configure:3988: checking for PTRACE_GETXFPREGS" >&5
 if eval "test \"`echo '$''{'gdb_cv_have_ptrace_getxfpregs'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3799 "configure"
+#line 3993 "configure"
 #include "confdefs.h"
 #include <sys/ptrace.h>
 int main() {
 PTRACE_GETXFPREGS;
 ; return 0; }
 EOF
-if { (eval echo configure:3806: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4000: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   gdb_cv_have_ptrace_getxfpregs=yes
 else
@@ -3823,7 +4017,7 @@
 fi
 
 echo $ac_n "checking for socketpair in -lsocket""... $ac_c" 1>&6
-echo "configure:3827: checking for socketpair in -lsocket" >&5
+echo "configure:4021: checking for socketpair in -lsocket" >&5
 ac_lib_var=`echo socket'_'socketpair | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3831,7 +4025,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3835 "configure"
+#line 4029 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3842,7 +4036,7 @@
 socketpair()
 ; return 0; }
 EOF
-if { (eval echo configure:3846: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4040: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3872,12 +4066,12 @@
 for ac_func in socketpair
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3876: checking for $ac_func" >&5
+echo "configure:4070: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3881 "configure"
+#line 4075 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -3900,7 +4094,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3904: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4098: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -3927,12 +4121,12 @@
 
 
 echo $ac_n "checking whether malloc must be declared""... $ac_c" 1>&6
-echo "configure:3931: checking whether malloc must be declared" >&5
+echo "configure:4125: checking whether malloc must be declared" >&5
 if eval "test \"`echo '$''{'bfd_cv_decl_needed_malloc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3936 "configure"
+#line 4130 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -3953,7 +4147,7 @@
 char *(*pfn) = (char *(*)) malloc
 ; return 0; }
 EOF
-if { (eval echo configure:3957: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4151: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_decl_needed_malloc=no
 else
@@ -3974,12 +4168,12 @@
 fi
 
 echo $ac_n "checking whether realloc must be declared""... $ac_c" 1>&6
-echo "configure:3978: checking whether realloc must be declared" >&5
+echo "configure:4172: checking whether realloc must be declared" >&5
 if eval "test \"`echo '$''{'bfd_cv_decl_needed_realloc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3983 "configure"
+#line 4177 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -4000,7 +4194,7 @@
 char *(*pfn) = (char *(*)) realloc
 ; return 0; }
 EOF
-if { (eval echo configure:4004: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4198: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_decl_needed_realloc=no
 else
@@ -4021,12 +4215,12 @@
 fi
 
 echo $ac_n "checking whether free must be declared""... $ac_c" 1>&6
-echo "configure:4025: checking whether free must be declared" >&5
+echo "configure:4219: checking whether free must be declared" >&5
 if eval "test \"`echo '$''{'bfd_cv_decl_needed_free'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4030 "configure"
+#line 4224 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -4047,7 +4241,7 @@
 char *(*pfn) = (char *(*)) free
 ; return 0; }
 EOF
-if { (eval echo configure:4051: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4245: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_decl_needed_free=no
 else
@@ -4068,12 +4262,12 @@
 fi
 
 echo $ac_n "checking whether strerror must be declared""... $ac_c" 1>&6
-echo "configure:4072: checking whether strerror must be declared" >&5
+echo "configure:4266: checking whether strerror must be declared" >&5
 if eval "test \"`echo '$''{'bfd_cv_decl_needed_strerror'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4077 "configure"
+#line 4271 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -4094,7 +4288,7 @@
 char *(*pfn) = (char *(*)) strerror
 ; return 0; }
 EOF
-if { (eval echo configure:4098: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4292: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_decl_needed_strerror=no
 else
@@ -4115,12 +4309,12 @@
 fi
 
 echo $ac_n "checking whether strdup must be declared""... $ac_c" 1>&6
-echo "configure:4119: checking whether strdup must be declared" >&5
+echo "configure:4313: checking whether strdup must be declared" >&5
 if eval "test \"`echo '$''{'bfd_cv_decl_needed_strdup'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4124 "configure"
+#line 4318 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -4141,7 +4335,7 @@
 char *(*pfn) = (char *(*)) strdup
 ; return 0; }
 EOF
-if { (eval echo configure:4145: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4339: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_decl_needed_strdup=no
 else
@@ -4162,12 +4356,12 @@
 fi
 
 echo $ac_n "checking whether strstr must be declared""... $ac_c" 1>&6
-echo "configure:4166: checking whether strstr must be declared" >&5
+echo "configure:4360: checking whether strstr must be declared" >&5
 if eval "test \"`echo '$''{'bfd_cv_decl_needed_strstr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4171 "configure"
+#line 4365 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -4188,7 +4382,7 @@
 char *(*pfn) = (char *(*)) strstr
 ; return 0; }
 EOF
-if { (eval echo configure:4192: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4386: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_decl_needed_strstr=no
 else
@@ -4215,9 +4409,9 @@
 # could be expunged. --jsm 1999-03-22
 
 echo $ac_n "checking for HPUX save_state structure""... $ac_c" 1>&6
-echo "configure:4219: checking for HPUX save_state structure" >&5
+echo "configure:4413: checking for HPUX save_state structure" >&5
 cat > conftest.$ac_ext <<EOF
-#line 4221 "configure"
+#line 4415 "configure"
 #include "confdefs.h"
 #include <machine/save_state.h>
 EOF
@@ -4232,7 +4426,7 @@
 rm -f conftest*
 
 cat > conftest.$ac_ext <<EOF
-#line 4236 "configure"
+#line 4430 "configure"
 #include "confdefs.h"
 #include <machine/save_state.h>
 EOF
@@ -4296,19 +4490,19 @@
 
 if test "$ac_cv_header_sys_procfs_h" = yes; then
   echo $ac_n "checking for pstatus_t in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4300: checking for pstatus_t in sys/procfs.h" >&5
+echo "configure:4494: checking for pstatus_t in sys/procfs.h" >&5
  if eval "test \"`echo '$''{'bfd_cv_have_sys_procfs_type_pstatus_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4305 "configure"
+#line 4499 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
 int main() {
 pstatus_t avar
 ; return 0; }
 EOF
-if { (eval echo configure:4312: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4506: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_have_sys_procfs_type_pstatus_t=yes
 else
@@ -4330,19 +4524,19 @@
  echo "$ac_t""$bfd_cv_have_sys_procfs_type_pstatus_t" 1>&6
 
   echo $ac_n "checking for prrun_t in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4334: checking for prrun_t in sys/procfs.h" >&5
+echo "configure:4528: checking for prrun_t in sys/procfs.h" >&5
  if eval "test \"`echo '$''{'bfd_cv_have_sys_procfs_type_prrun_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4339 "configure"
+#line 4533 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
 int main() {
 prrun_t avar
 ; return 0; }
 EOF
-if { (eval echo configure:4346: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4540: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_have_sys_procfs_type_prrun_t=yes
 else
@@ -4364,19 +4558,19 @@
  echo "$ac_t""$bfd_cv_have_sys_procfs_type_prrun_t" 1>&6
 
   echo $ac_n "checking for gregset_t in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4368: checking for gregset_t in sys/procfs.h" >&5
+echo "configure:4562: checking for gregset_t in sys/procfs.h" >&5
  if eval "test \"`echo '$''{'bfd_cv_have_sys_procfs_type_gregset_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4373 "configure"
+#line 4567 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
 int main() {
 gregset_t avar
 ; return 0; }
 EOF
-if { (eval echo configure:4380: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4574: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_have_sys_procfs_type_gregset_t=yes
 else
@@ -4398,19 +4592,19 @@
  echo "$ac_t""$bfd_cv_have_sys_procfs_type_gregset_t" 1>&6
 
   echo $ac_n "checking for fpregset_t in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4402: checking for fpregset_t in sys/procfs.h" >&5
+echo "configure:4596: checking for fpregset_t in sys/procfs.h" >&5
  if eval "test \"`echo '$''{'bfd_cv_have_sys_procfs_type_fpregset_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4407 "configure"
+#line 4601 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
 int main() {
 fpregset_t avar
 ; return 0; }
 EOF
-if { (eval echo configure:4414: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4608: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_have_sys_procfs_type_fpregset_t=yes
 else
@@ -4432,19 +4626,19 @@
  echo "$ac_t""$bfd_cv_have_sys_procfs_type_fpregset_t" 1>&6
 
   echo $ac_n "checking for prgregset_t in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4436: checking for prgregset_t in sys/procfs.h" >&5
+echo "configure:4630: checking for prgregset_t in sys/procfs.h" >&5
  if eval "test \"`echo '$''{'bfd_cv_have_sys_procfs_type_prgregset_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4441 "configure"
+#line 4635 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
 int main() {
 prgregset_t avar
 ; return 0; }
 EOF
-if { (eval echo configure:4448: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4642: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_have_sys_procfs_type_prgregset_t=yes
 else
@@ -4466,19 +4660,19 @@
  echo "$ac_t""$bfd_cv_have_sys_procfs_type_prgregset_t" 1>&6
 
   echo $ac_n "checking for prfpregset_t in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4470: checking for prfpregset_t in sys/procfs.h" >&5
+echo "configure:4664: checking for prfpregset_t in sys/procfs.h" >&5
  if eval "test \"`echo '$''{'bfd_cv_have_sys_procfs_type_prfpregset_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4475 "configure"
+#line 4669 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
 int main() {
 prfpregset_t avar
 ; return 0; }
 EOF
-if { (eval echo configure:4482: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4676: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_have_sys_procfs_type_prfpregset_t=yes
 else
@@ -4500,19 +4694,19 @@
  echo "$ac_t""$bfd_cv_have_sys_procfs_type_prfpregset_t" 1>&6
 
   echo $ac_n "checking for lwpid_t in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4504: checking for lwpid_t in sys/procfs.h" >&5
+echo "configure:4698: checking for lwpid_t in sys/procfs.h" >&5
  if eval "test \"`echo '$''{'bfd_cv_have_sys_procfs_type_lwpid_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4509 "configure"
+#line 4703 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
 int main() {
 lwpid_t avar
 ; return 0; }
 EOF
-if { (eval echo configure:4516: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4710: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_have_sys_procfs_type_lwpid_t=yes
 else
@@ -4534,19 +4728,19 @@
  echo "$ac_t""$bfd_cv_have_sys_procfs_type_lwpid_t" 1>&6
 
   echo $ac_n "checking for psaddr_t in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4538: checking for psaddr_t in sys/procfs.h" >&5
+echo "configure:4732: checking for psaddr_t in sys/procfs.h" >&5
  if eval "test \"`echo '$''{'bfd_cv_have_sys_procfs_type_psaddr_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4543 "configure"
+#line 4737 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
 int main() {
 psaddr_t avar
 ; return 0; }
 EOF
-if { (eval echo configure:4550: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4744: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   bfd_cv_have_sys_procfs_type_psaddr_t=yes
 else
@@ -4572,7 +4766,7 @@
         
   if test $bfd_cv_have_sys_procfs_type_prfpregset_t = yes; then
     echo $ac_n "checking whether prfpregset_t type is broken""... $ac_c" 1>&6
-echo "configure:4576: checking whether prfpregset_t type is broken" >&5
+echo "configure:4770: checking whether prfpregset_t type is broken" >&5
     if eval "test \"`echo '$''{'gdb_cv_prfpregset_t_broken'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4580,7 +4774,7 @@
   gdb_cv_prfpregset_t_broken=yes
 else
   cat > conftest.$ac_ext <<EOF
-#line 4584 "configure"
+#line 4778 "configure"
 #include "confdefs.h"
 #include <sys/procfs.h>
        int main ()
@@ -4590,7 +4784,7 @@
          return 0;
        }
 EOF
-if { (eval echo configure:4594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:4788: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   gdb_cv_prfpregset_t_broken=no
 else
@@ -4615,12 +4809,12 @@
 
   
   echo $ac_n "checking for PIOCSET ioctl entry in sys/procfs.h""... $ac_c" 1>&6
-echo "configure:4619: checking for PIOCSET ioctl entry in sys/procfs.h" >&5
+echo "configure:4813: checking for PIOCSET ioctl entry in sys/procfs.h" >&5
   if eval "test \"`echo '$''{'gdb_cv_have_procfs_piocset'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4624 "configure"
+#line 4818 "configure"
 #include "confdefs.h"
 #include <unistd.h>
 #include <sys/types.h>
@@ -4633,7 +4827,7 @@
   
 ; return 0; }
 EOF
-if { (eval echo configure:4637: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4831: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   gdb_cv_have_procfs_piocset=yes
 else
@@ -4655,7 +4849,7 @@
 fi
 
 echo $ac_n "checking for main in -lm""... $ac_c" 1>&6
-echo "configure:4659: checking for main in -lm" >&5
+echo "configure:4853: checking for main in -lm" >&5
 ac_lib_var=`echo m'_'main | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4663,14 +4857,14 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4667 "configure"
+#line 4861 "configure"
 #include "confdefs.h"
 
 int main() {
 main()
 ; return 0; }
 EOF
-if { (eval echo configure:4674: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4868: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4699,7 +4893,7 @@
 
 
 echo $ac_n "checking for wctype in -lc""... $ac_c" 1>&6
-echo "configure:4703: checking for wctype in -lc" >&5
+echo "configure:4897: checking for wctype in -lc" >&5
 ac_lib_var=`echo c'_'wctype | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4707,7 +4901,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4711 "configure"
+#line 4905 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4718,7 +4912,7 @@
 wctype()
 ; return 0; }
 EOF
-if { (eval echo configure:4722: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4916: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4737,7 +4931,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for wctype in -lw""... $ac_c" 1>&6
-echo "configure:4741: checking for wctype in -lw" >&5
+echo "configure:4935: checking for wctype in -lw" >&5
 ac_lib_var=`echo w'_'wctype | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4745,7 +4939,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lw  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4749 "configure"
+#line 4943 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4756,7 +4950,7 @@
 wctype()
 ; return 0; }
 EOF
-if { (eval echo configure:4760: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4954: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4788,12 +4982,12 @@
 
 
 echo $ac_n "checking for long long support in compiler""... $ac_c" 1>&6
-echo "configure:4792: checking for long long support in compiler" >&5
+echo "configure:4986: checking for long long support in compiler" >&5
 if eval "test \"`echo '$''{'gdb_cv_c_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4797 "configure"
+#line 4991 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -4803,7 +4997,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:4807: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:5001: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   gdb_cv_c_long_long=yes
 else
@@ -4825,7 +5019,7 @@
 
 
 echo $ac_n "checking for long long support in printf""... $ac_c" 1>&6
-echo "configure:4829: checking for long long support in printf" >&5
+echo "configure:5023: checking for long long support in printf" >&5
 if eval "test \"`echo '$''{'gdb_cv_printf_has_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4833,7 +5027,7 @@
   gdb_cv_printf_has_long_long=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 4837 "configure"
+#line 5031 "configure"
 #include "confdefs.h"
 
 int main () {
@@ -4847,7 +5041,7 @@
   return (strcmp ("0x0123456789abcdef", buf));
 }
 EOF
-if { (eval echo configure:4851: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:5045: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   gdb_cv_printf_has_long_long=yes
 else
@@ -4871,19 +5065,19 @@
 
 
 echo $ac_n "checking for long double support in compiler""... $ac_c" 1>&6
-echo "configure:4875: checking for long double support in compiler" >&5
+echo "configure:5069: checking for long double support in compiler" >&5
 if eval "test \"`echo '$''{'ac_cv_c_long_double'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4880 "configure"
+#line 5074 "configure"
 #include "confdefs.h"
 
 int main() {
 long double foo;
 ; return 0; }
 EOF
-if { (eval echo configure:4887: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:5081: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_long_double=yes
 else
@@ -4905,7 +5099,7 @@
 
 
 echo $ac_n "checking for long double support in printf""... $ac_c" 1>&6
-echo "configure:4909: checking for long double support in printf" >&5
+echo "configure:5103: checking for long double support in printf" >&5
 if eval "test \"`echo '$''{'gdb_cv_printf_has_long_double'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4913,7 +5107,7 @@
   gdb_cv_printf_has_long_double=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 4917 "configure"
+#line 5111 "configure"
 #include "confdefs.h"
 
 int main () {
@@ -4923,7 +5117,7 @@
   return (strncmp ("3.14159", buf, 7));
 }
 EOF
-if { (eval echo configure:4927: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:5121: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   gdb_cv_printf_has_long_double=yes
 else
@@ -4947,7 +5141,7 @@
 
 
 echo $ac_n "checking for long double support in scanf""... $ac_c" 1>&6
-echo "configure:4951: checking for long double support in scanf" >&5
+echo "configure:5145: checking for long double support in scanf" >&5
 if eval "test \"`echo '$''{'gdb_cv_scanf_has_long_double'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4955,7 +5149,7 @@
   gdb_cv_scanf_has_long_double=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 4959 "configure"
+#line 5153 "configure"
 #include "confdefs.h"
 
 int main () {
@@ -4965,7 +5159,7 @@
   return !(f > 3.14159 && f < 3.14160);
 }
 EOF
-if { (eval echo configure:4969: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:5163: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   gdb_cv_scanf_has_long_double=yes
 else
@@ -4991,17 +5185,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:4995: checking for $ac_hdr" >&5
+echo "configure:5189: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 5000 "configure"
+#line 5194 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:5005: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:5199: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -5030,12 +5224,12 @@
 for ac_func in getpagesize
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5034: checking for $ac_func" >&5
+echo "configure:5228: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 5039 "configure"
+#line 5233 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -5058,7 +5252,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:5062: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:5256: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -5083,7 +5277,7 @@
 done
 
 echo $ac_n "checking for working mmap""... $ac_c" 1>&6
-echo "configure:5087: checking for working mmap" >&5
+echo "configure:5281: checking for working mmap" >&5
 if eval "test \"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -5091,7 +5285,7 @@
   ac_cv_func_mmap_fixed_mapped=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 5095 "configure"
+#line 5289 "configure"
 #include "confdefs.h"
 
 /* Thanks to Mike Haertel and Jim Avera for this test.
@@ -5231,7 +5425,7 @@
 }
 
 EOF
-if { (eval echo configure:5235: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:5429: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_mmap_fixed_mapped=yes
 else
@@ -5260,7 +5454,7 @@
    case ${host_os} in
    hpux*)
       echo $ac_n "checking for HPUX/OSF thread support""... $ac_c" 1>&6
-echo "configure:5264: checking for HPUX/OSF thread support" >&5
+echo "configure:5458: checking for HPUX/OSF thread support" >&5
       if test -f /usr/include/dce/cma_config.h ; then
          if test "$GCC" = "yes" ; then
             echo "$ac_t""yes" 1>&6
@@ -5279,7 +5473,7 @@
       ;;
    solaris*)
       echo $ac_n "checking for Solaris thread debugging library""... $ac_c" 1>&6
-echo "configure:5283: checking for Solaris thread debugging library" >&5
+echo "configure:5477: checking for Solaris thread debugging library" >&5
       if test -f /usr/lib/libthread_db.so.1 ; then
          echo "$ac_t""yes" 1>&6
          cat >> confdefs.h <<\EOF
@@ -5289,7 +5483,7 @@
          CONFIG_OBS="${CONFIG_OBS} sol-thread.o"
          CONFIG_SRCS="${CONFIG_SRCS} sol-thread.c"
          echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:5293: checking for dlopen in -ldl" >&5
+echo "configure:5487: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -5297,7 +5491,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 5301 "configure"
+#line 5495 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -5308,7 +5502,7 @@
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:5312: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:5506: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -5340,17 +5534,17 @@
             # all symbols visible in the dynamic symbol table.
             hold_ldflags=$LDFLAGS
             echo $ac_n "checking for the ld -export-dynamic flag""... $ac_c" 1>&6
-echo "configure:5344: checking for the ld -export-dynamic flag" >&5
+echo "configure:5538: checking for the ld -export-dynamic flag" >&5
             LDFLAGS="${LDFLAGS} -Wl,-export-dynamic"
             cat > conftest.$ac_ext <<EOF
-#line 5347 "configure"
+#line 5541 "configure"
 #include "confdefs.h"
 
 int main() {
 int i;
 ; return 0; }
 EOF
-if { (eval echo configure:5354: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:5548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   found=yes
 else
@@ -5369,13 +5563,13 @@
 	 # Sun randomly tweaked the prototypes in <proc_service.h>
 	 # at one point.
 	 echo $ac_n "checking if <proc_service.h> is old""... $ac_c" 1>&6
-echo "configure:5373: checking if <proc_service.h> is old" >&5
+echo "configure:5567: checking if <proc_service.h> is old" >&5
 	 if eval "test \"`echo '$''{'gdb_cv_proc_service_is_old'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
 	    cat > conftest.$ac_ext <<EOF
-#line 5379 "configure"
+#line 5573 "configure"
 #include "confdefs.h"
 
 		#include <proc_service.h>
@@ -5386,7 +5580,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:5390: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:5584: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   gdb_cv_proc_service_is_old=no
 else
@@ -5576,12 +5770,12 @@
 REGEX_CFLAGS="-DUSE_INCLUDED_REGEX"
 if test $want_included_regex = false; then
   echo $ac_n "checking for GNU regex""... $ac_c" 1>&6
-echo "configure:5580: checking for GNU regex" >&5
+echo "configure:5774: checking for GNU regex" >&5
   if eval "test \"`echo '$''{'gdb_cv_have_gnu_regex'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 5585 "configure"
+#line 5779 "configure"
 #include "confdefs.h"
 #include <gnu-versions.h>
 #include <sys/types.h>
@@ -5593,7 +5787,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:5597: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:5791: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   gdb_cv_have_gnu_regex=yes
 else
@@ -5616,12 +5810,12 @@
 
 # In the Cygwin environment, we need some additional flags.
 echo $ac_n "checking for cygwin""... $ac_c" 1>&6
-echo "configure:5620: checking for cygwin" >&5
+echo "configure:5814: checking for cygwin" >&5
 if eval "test \"`echo '$''{'gdb_cv_os_cygwin'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 5625 "configure"
+#line 5819 "configure"
 #include "confdefs.h"
 
 #if defined (__CYGWIN__) || defined (__CYGWIN32__)
@@ -5655,7 +5849,7 @@
 else
   TERM_LIB=
   echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
-echo "configure:5659: checking for tgetent in -lncurses" >&5
+echo "configure:5853: checking for tgetent in -lncurses" >&5
 ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -5663,7 +5857,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lncurses  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 5667 "configure"
+#line 5861 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -5674,7 +5868,7 @@
 tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:5678: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:5872: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -5693,7 +5887,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for tgetent in -lHcurses""... $ac_c" 1>&6
-echo "configure:5697: checking for tgetent in -lHcurses" >&5
+echo "configure:5891: checking for tgetent in -lHcurses" >&5
 ac_lib_var=`echo Hcurses'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -5701,7 +5895,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lHcurses  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 5705 "configure"
+#line 5899 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -5712,7 +5906,7 @@
 tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:5716: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:5910: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -5731,7 +5925,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for tgetent in -ltermlib""... $ac_c" 1>&6
-echo "configure:5735: checking for tgetent in -ltermlib" >&5
+echo "configure:5929: checking for tgetent in -ltermlib" >&5
 ac_lib_var=`echo termlib'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -5739,7 +5933,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ltermlib  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 5743 "configure"
+#line 5937 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -5750,7 +5944,7 @@
 tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:5754: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:5948: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -5769,7 +5963,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
-echo "configure:5773: checking for tgetent in -ltermcap" >&5
+echo "configure:5967: checking for tgetent in -ltermcap" >&5
 ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -5777,7 +5971,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ltermcap  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 5781 "configure"
+#line 5975 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -5788,7 +5982,7 @@
 tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:5792: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:5986: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -5807,7 +6001,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for tgetent in -lcurses""... $ac_c" 1>&6
-echo "configure:5811: checking for tgetent in -lcurses" >&5
+echo "configure:6005: checking for tgetent in -lcurses" >&5
 ac_lib_var=`echo curses'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -5815,7 +6009,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lcurses  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 5819 "configure"
+#line 6013 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -5826,7 +6020,7 @@
 tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:5830: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:6024: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -5845,7 +6039,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for tgetent in -lterminfo""... $ac_c" 1>&6
-echo "configure:5849: checking for tgetent in -lterminfo" >&5
+echo "configure:6043: checking for tgetent in -lterminfo" >&5
 ac_lib_var=`echo terminfo'_'tgetent | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -5853,7 +6047,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lterminfo  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 5857 "configure"
+#line 6051 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -5864,7 +6058,7 @@
 tgetent()
 ; return 0; }
 EOF
-if { (eval echo configure:5868: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:6062: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -6022,7 +6216,7 @@
 fi
 
   echo $ac_n "checking for Tcl configuration""... $ac_c" 1>&6
-echo "configure:6026: checking for Tcl configuration" >&5
+echo "configure:6220: checking for Tcl configuration" >&5
   if eval "test \"`echo '$''{'ac_cv_c_tclconfig'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -6130,7 +6324,7 @@
 fi
 
   echo $ac_n "checking for Tk configuration""... $ac_c" 1>&6
-echo "configure:6134: checking for Tk configuration" >&5
+echo "configure:6328: checking for Tk configuration" >&5
   if eval "test \"`echo '$''{'ac_cv_c_tkconfig'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -6226,7 +6420,7 @@
 
 no_tcl=true
 echo $ac_n "checking for Tcl private headers. dir=${configdir}""... $ac_c" 1>&6
-echo "configure:6230: checking for Tcl private headers. dir=${configdir}" >&5
+echo "configure:6424: checking for Tcl private headers. dir=${configdir}" >&5
 # Check whether --with-tclinclude or --without-tclinclude was given.
 if test "${with_tclinclude+set}" = set; then
   withval="$with_tclinclude"
@@ -6292,17 +6486,17 @@
 if test x"${ac_cv_c_tclh}" = x ; then
    ac_safe=`echo "tclInt.h" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for tclInt.h""... $ac_c" 1>&6
-echo "configure:6296: checking for tclInt.h" >&5
+echo "configure:6490: checking for tclInt.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 6301 "configure"
+#line 6495 "configure"
 #include "confdefs.h"
 #include <tclInt.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:6306: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:6500: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -6362,7 +6556,7 @@
 #
 no_tk=true
 echo $ac_n "checking for Tk private headers""... $ac_c" 1>&6
-echo "configure:6366: checking for Tk private headers" >&5
+echo "configure:6560: checking for Tk private headers" >&5
 # Check whether --with-tkinclude or --without-tkinclude was given.
 if test "${with_tkinclude+set}" = set; then
   withval="$with_tkinclude"
@@ -6428,17 +6622,17 @@
 if test x"${ac_cv_c_tkh}" = x ; then
    ac_safe=`echo "tk.h" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for tk.h""... $ac_c" 1>&6
-echo "configure:6432: checking for tk.h" >&5
+echo "configure:6626: checking for tk.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 6437 "configure"
+#line 6631 "configure"
 #include "confdefs.h"
 #include <tk.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:6442: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:6636: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -6484,7 +6678,7 @@
 
 	   
 echo $ac_n "checking for Itcl private headers. srcdir=${srcdir}""... $ac_c" 1>&6
-echo "configure:6488: checking for Itcl private headers. srcdir=${srcdir}" >&5
+echo "configure:6682: checking for Itcl private headers. srcdir=${srcdir}" >&5
 if test x"${ac_cv_c_itclh}" = x ; then
   for i in ${srcdir}/../itcl ${srcdir}/../../itcl ${srcdir}/../../../itcl ${srcdir}/../itcl/itcl; do
     if test -f $i/generic/itcl.h ; then
@@ -6507,7 +6701,7 @@
 
 	   
 echo $ac_n "checking for Itk private headers. srcdir=${srcdir}""... $ac_c" 1>&6
-echo "configure:6511: checking for Itk private headers. srcdir=${srcdir}" >&5
+echo "configure:6705: checking for Itk private headers. srcdir=${srcdir}" >&5
 if test x"${ac_cv_c_itkh}" = x ; then
   for i in ${srcdir}/../itcl ${srcdir}/../../itcl ${srcdir}/../../../itcl ${srcdir}/../itcl/itk; do
     if test -f $i/generic/itk.h ; then
@@ -6530,7 +6724,7 @@
 
 	   
 echo $ac_n "checking for Tix private headers. srcdir=${srcdir}""... $ac_c" 1>&6
-echo "configure:6534: checking for Tix private headers. srcdir=${srcdir}" >&5
+echo "configure:6728: checking for Tix private headers. srcdir=${srcdir}" >&5
 if test x"${ac_cv_c_tixh}" = x ; then
   for i in ${srcdir}/../tix ${srcdir}/../../tix ${srcdir}/../../../tix ; do
     if test -f $i/generic/tix.h ; then
@@ -6568,7 +6762,7 @@
 fi
 
   echo $ac_n "checking for Itcl configuration""... $ac_c" 1>&6
-echo "configure:6572: checking for Itcl configuration" >&5
+echo "configure:6766: checking for Itcl configuration" >&5
   if eval "test \"`echo '$''{'ac_cv_c_itclconfig'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -6680,7 +6874,7 @@
 fi
 
   echo $ac_n "checking for Itk configuration""... $ac_c" 1>&6
-echo "configure:6684: checking for Itk configuration" >&5
+echo "configure:6878: checking for Itk configuration" >&5
   if eval "test \"`echo '$''{'ac_cv_c_itkconfig'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -6792,7 +6986,7 @@
 fi
 
   echo $ac_n "checking for Tix configuration""... $ac_c" 1>&6
-echo "configure:6796: checking for Tix configuration" >&5
+echo "configure:6990: checking for Tix configuration" >&5
   if eval "test \"`echo '$''{'ac_cv_c_tixconfig'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -6931,7 +7125,7 @@
 # Uses ac_ vars as temps to allow command line to override cache and checks.
 # --without-x overrides everything else, but does not touch the cache.
 echo $ac_n "checking for X""... $ac_c" 1>&6
-echo "configure:6935: checking for X" >&5
+echo "configure:7129: checking for X" >&5
 
 # Check whether --with-x or --without-x was given.
 if test "${with_x+set}" = set; then
@@ -6993,12 +7187,12 @@
 
   # First, try using that file with no special directory specified.
 cat > conftest.$ac_ext <<EOF
-#line 6997 "configure"
+#line 7191 "configure"
 #include "confdefs.h"
 #include <$x_direct_test_include>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7002: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:7196: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -7067,14 +7261,14 @@
   ac_save_LIBS="$LIBS"
   LIBS="-l$x_direct_test_library $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 7071 "configure"
+#line 7265 "configure"
 #include "confdefs.h"
 
 int main() {
 ${x_direct_test_function}()
 ; return 0; }
 EOF
-if { (eval echo configure:7078: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7272: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   LIBS="$ac_save_LIBS"
 # We can link X programs with no special library path.
@@ -7356,7 +7550,7 @@
 links="${links} nm.h"
 fi
 echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
-echo "configure:7360: checking whether ln -s works" >&5
+echo "configure:7554: checking whether ln -s works" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -7380,12 +7574,12 @@
 
 
 echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
-echo "configure:7384: checking for Cygwin environment" >&5
+echo "configure:7578: checking for Cygwin environment" >&5
 if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7389 "configure"
+#line 7583 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -7396,7 +7590,7 @@
 return __CYGWIN__;
 ; return 0; }
 EOF
-if { (eval echo configure:7400: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:7594: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_cygwin=yes
 else
@@ -7413,19 +7607,19 @@
 CYGWIN=
 test "$ac_cv_cygwin" = yes && CYGWIN=yes
 echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
-echo "configure:7417: checking for mingw32 environment" >&5
+echo "configure:7611: checking for mingw32 environment" >&5
 if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7422 "configure"
+#line 7616 "configure"
 #include "confdefs.h"
 
 int main() {
 return __MINGW32__;
 ; return 0; }
 EOF
-if { (eval echo configure:7429: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:7623: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_mingw32=yes
 else
@@ -7444,7 +7638,7 @@
 
 
 echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
-echo "configure:7448: checking for executable suffix" >&5
+echo "configure:7642: checking for executable suffix" >&5
 if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -7454,10 +7648,10 @@
   rm -f conftest*
   echo 'int main () { return 0; }' > conftest.$ac_ext
   ac_cv_exeext=
-  if { (eval echo configure:7458: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+  if { (eval echo configure:7652: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
     for file in conftest.*; do
       case $file in
-      *.c | *.o | *.obj | *.ilk | *.pdb) ;;
+      *.c | *.o | *.obj) ;;
       *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;
       esac
     done
@@ -7615,6 +7809,9 @@
 s%@MAINT@%$MAINT%g
 s%@CC@%$CC%g
 s%@CPP@%$CPP%g
+s%@DIR_aif@%$DIR_aif%g
+s%@INCLUDE_aif@%$INCLUDE_aif%g
+s%@LIB_aif@%$LIB_aif%g
 s%@host@%$host%g
 s%@host_alias@%$host_alias%g
 s%@host_cpu@%$host_cpu%g
