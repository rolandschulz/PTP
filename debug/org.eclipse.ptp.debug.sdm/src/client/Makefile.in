#

srcdir =	@srcdir@
VPATH =		@srcdir@
prefix =	@prefix@
exec_prefix =	@exec_prefix@
bindir =	@bindir@
libdir =	@libdir@
build =		@build@

CC =		@CC@
CPPFLAGS =	@CPPFLAGS@
CFLAGS =	@CFLAGS@
LDFLAGS =	@LDFLAGS@
DEFS =		@DEFS@
INSTALL =	@INSTALL@
INSTALL_PROGRAM =	@INSTALL_PROGRAM@
INSTALL_DATA =	@INSTALL_DATA@
RANLIB =	@RANLIB@
AR =		ar
RPCGEN =	rpcgen
REMOVE =	rm -f

TOP =		$(srcdir)/../..
LIB_aif =	@LIB_aif@
INCLUDE_aif =	@INCLUDE_aif@
UTIL =		$(srcdir)/../utils
ALL_CFLAGS =	$(CPPFLAGS) $(DEFS) -I$(srcdir) -I$(TOP)/include $(INCLUDE_aif)  $(CFLAGS)
LIBS =		-lm $(LIB_aif) @LIBS@
INSPROGS =	sdmclient

SHELL =		/bin/sh
.SUFFIXES:
.SUFFIXES: .c .o
.c.o:
	$(CC) -c $(ALL_CFLAGS) $<

SRCS=	client.c client_interface.c startup.c

OBJS=	client.o client_interface.o startup.o

all:	sdmclient

depend:
	cp Makefile Makefile.bak
	sed -n '1,/^# DO NOT REMOVE THIS LINE/p' < Makefile > makedep
	$(CC) -MM $(ALL_CFLAGS) $(SRCS) >> makedep
	mv makedep Makefile

clean:
	$(REMOVE) sdmclient a.out core *.o

distclean: clean
	$(REMOVE) Makefile Makefile.bak

install-dirs:
	$(srcdir)/../../mkinstalldirs $(bindir) $(libdir)

install-progs:
	for i in $(INSPROGS); do \
		$(REMOVE) $(bindir)/$$i; \
		$(INSTALL_PROGRAM) $$i $(bindir)/$$i; \
	done

install: all install-dirs install-progs

sdmclient: $(OBJS)
	$(CC) $(CFLAGS) $(LFLAGS) -o guard $(OBJS) $(LIBS)

# DO NOT REMOVE THIS LINE
